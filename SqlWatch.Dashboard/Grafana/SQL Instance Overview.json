{
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": {
          "type": "datasource",
          "uid": "grafana"
        },
        "enable": true,
        "hide": true,
        "iconColor": "rgba(0, 211, 255, 1)",
        "name": "Annotations & Alerts",
        "target": {
          "limit": 100,
          "matchAny": false,
          "tags": [],
          "type": "dashboard"
        },
        "type": "dashboard"
      }
    ]
  },
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 1,
  "id": 6,
  "links": [
    {
      "asDropdown": true,
      "icon": "external link",
      "includeVars": true,
      "keepTime": true,
      "tags": [
        "SQLWATCH"
      ],
      "title": "Dashboards",
      "type": "dashboards"
    }
  ],
  "liveNow": false,
  "panels": [
    {
      "collapsed": false,
      "datasource": {
        "type": "mssql",
        "uid": "EeAYXKY4k"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 0
      },
      "id": 173,
      "panels": [],
      "targets": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "refId": "A"
        }
      ],
      "title": "$sql_instance: SQL Server Overview",
      "type": "row"
    },
    {
      "datasource": {
        "type": "mssql",
        "uid": "EeAYXKY4k"
      },
      "gridPos": {
        "h": 5,
        "w": 24,
        "x": 0,
        "y": 1
      },
      "id": 59,
      "options": {
        "code": {
          "language": "plaintext",
          "showLineNumbers": false,
          "showMiniMap": false
        },
        "content": "<br><br><h1 id=\"overview\">Overview</h1>\r\n<p>This dashboard was designed to help you understand what happens in your SQL Server and help you find bottlenecks. A single page view helps correlate various events and makes it easier to spot trends. Like most computer systems, SQL Server relies on the following components to perform well: <b>CPU > Memory > Storage > Network</b>.\r\nIf any of these does not perform well, we may be seeing performance degradation in our database and/or application. We start looking at the tiles from left to right. Although the data flows from right to left (Storage to CPU), in case of slow disks, we may be seeing long latencies, lots of disk tranfers and long Pending Queue and not a lot of CPU activity. In case of poorly optimised queries or general workload problems, we may be seeing lots of CPU activity but not a lot of disk activity.</p>",
        "mode": "html"
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "queryType": "randomWalk",
          "refId": "A"
        }
      ],
      "transparent": true,
      "type": "text"
    },
    {
      "datasource": {
        "type": "mssql",
        "uid": "EeAYXKY4k"
      },
      "gridPos": {
        "h": 3,
        "w": 24,
        "x": 0,
        "y": 6
      },
      "id": 248,
      "options": {
        "code": {
          "language": "plaintext",
          "showLineNumbers": false,
          "showMiniMap": false
        },
        "content": "<h1><b><big>$sql_instance</big></b></h1>\r\n<p>$sql_version</p>",
        "mode": "html"
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "queryType": "randomWalk",
          "refId": "A"
        }
      ],
      "transparent": true,
      "type": "text"
    },
    {
      "datasource": {
        "type": "datasource",
        "uid": "-- Dashboard --"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "decimals": 0,
          "links": [],
          "mappings": [],
          "max": 100,
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "dark-green",
                "value": null
              },
              {
                "color": "light-orange",
                "value": 80
              },
              {
                "color": "red",
                "value": 95
              }
            ]
          },
          "unit": "percent"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 3,
        "x": 0,
        "y": 9
      },
      "id": 268,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "vertical",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "text": {},
        "textMode": "value_and_name"
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "panelId": 269,
          "refId": "A"
        }
      ],
      "transformations": [
        {
          "id": "seriesToColumns",
          "options": {
            "byField": "Time"
          }
        },
        {
          "id": "filterFieldsByName",
          "options": {
            "include": {
              "pattern": "CPU usage %"
            }
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "Availability Group Bytes": true,
              "Batch Requests/sec": true,
              "Bytes Received from Replica/sec": true,
              "Bytes Sent to Replica/sec": true,
              "Connection Memory (KB)": true,
              "Logins/sec": true,
              "Optimizer Memory (KB)": true,
              "SQL Cache Memory (KB)": true,
              "SQL Compilations/sec": true,
              "Stolen Server Memory (KB)": true,
              "Target Server Memory (KB)": true,
              "Time": true,
              "Total Server Memory (KB)": true,
              "Transactions/sec": true,
              "User Connections": true,
              "Wait Time": true,
              "max": true,
              "min": true
            },
            "indexByName": {
              "Time": 0,
              "max": 3,
              "min": 4,
              "sql": 2,
              "system": 1
            },
            "renameByName": {
              "CPU usage %": "CPU"
            }
          }
        }
      ],
      "transparent": true,
      "type": "stat"
    },
    {
      "datasource": {
        "type": "datasource",
        "uid": "-- Dashboard --"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "decimals": 0,
          "displayName": "Wait Time",
          "links": [],
          "mappings": [],
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "dark-green",
                "value": null
              },
              {
                "color": "light-orange",
                "value": 800
              },
              {
                "color": "red",
                "value": 1000
              }
            ]
          },
          "unit": "ms"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 3,
        "x": 3,
        "y": 9
      },
      "id": 310,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "vertical",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "text": {},
        "textMode": "value_and_name"
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "panelId": 102,
          "refId": "A"
        }
      ],
      "transformations": [
        {
          "id": "filterFieldsByName",
          "options": {
            "include": {
              "pattern": ""
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "mode": "reduceRow",
            "reduce": {
              "reducer": "sum"
            },
            "replaceFields": true
          }
        }
      ],
      "transparent": true,
      "type": "stat"
    },
    {
      "datasource": {
        "uid": "$DataSource"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "blue",
            "mode": "thresholds"
          },
          "decimals": 0,
          "links": [],
          "mappings": [],
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "dark-green",
                "value": null
              },
              {
                "color": "light-orange",
                "value": 1
              },
              {
                "color": "red",
                "value": 4
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 2,
        "x": 6,
        "y": 9
      },
      "id": 217,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "vertical",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "text": {},
        "textMode": "value_and_name"
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "alias": "",
          "datasource": {
            "uid": "$DataSource"
          },
          "format": "time_series",
          "hide": false,
          "rawSql": "SELECT \n      [time] = snapshot_time --$__timeGroup([snapshot_time], $aggregation) \n      ,[Pending] = sum([runnable_tasks_count]+work_queue_count+pending_disk_io_count)\n  FROM [dbo].[vw_sqlwatch_report_fact_perf_os_schedulers]\n  WHERE 1 = 1\n  AND $__timeFilter(snapshot_time)\n    and snapshot_time >= dateadd(minute,-15,getutcdate())\n  AND [sql_instance] = '$sql_instance'\n  GROUP BY snapshot_time --$__timeGroup([snapshot_time], $aggregation) \nORDER BY\n  time ASC\n  \n  ",
          "refId": "A"
        }
      ],
      "transformations": [
        {
          "id": "filterFieldsByName",
          "options": {
            "include": {
              "names": [
                "Pending"
              ]
            }
          }
        }
      ],
      "transparent": true,
      "type": "stat"
    },
    {
      "datasource": {
        "type": "datasource",
        "uid": "-- Dashboard --"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "blue",
            "mode": "thresholds"
          },
          "decimals": 0,
          "links": [],
          "mappings": [],
          "min": 0,
          "noValue": "0",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "dark-green",
                "value": null
              },
              {
                "color": "light-orange",
                "value": 1
              },
              {
                "color": "red",
                "value": 2
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 2,
        "x": 8,
        "y": 9
      },
      "id": 287,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "text": {},
        "textMode": "auto"
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "panelId": 296,
          "refId": "A"
        }
      ],
      "transformations": [
        {
          "id": "filterFieldsByName",
          "options": {
            "include": {
              "names": [
                "Waiting"
              ]
            }
          }
        }
      ],
      "transparent": true,
      "type": "stat"
    },
    {
      "datasource": {
        "uid": "$DataSource"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "blue",
            "mode": "thresholds"
          },
          "decimals": 0,
          "displayName": "Blocked",
          "links": [],
          "mappings": [],
          "min": 0,
          "noValue": "0",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "dark-green",
                "value": null
              },
              {
                "color": "red",
                "value": 0.1
              },
              {
                "color": "red",
                "value": 2
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 2,
        "x": 10,
        "y": 9
      },
      "id": 218,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "vertical",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "text": {},
        "textMode": "value_and_name"
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "alias": "",
          "datasource": {
            "uid": "$DataSource"
          },
          "format": "time_series",
          "hide": false,
          "rawSql": "SELECT time = isnull(x.event_time,h.snapshot_time)\r\n      ,[Blocked] = sum(case when isnull(blocking_session_id,0) > 0 then 1 else 0 end)\r\n  --xes only collects data when the event happens so it will return null if no events\r\n  --this will make grafana show \"No Data\" rather than default to zero as we're nog going to have a serie either.\r\n  --we have to fudge it a bit\r\n  \r\n  from dbo.sqlwatch_logger_snapshot_header h\r\n  left join [dbo].[ufn_sqlwatch_get_blocking_chains] ($__timeFrom(), $__timeTo(),'$sql_instance') x\r\n  on h.snapshot_time = x.snapshot_time\r\n  and h.snapshot_type_id = x.snapshot_type_id\r\n  and h.sql_instance = x.sql_instance\r\n  where h.sql_instance = '$sql_instance'\r\n  and h.snapshot_type_id = 9\r\n  and $__timeFilter(h.snapshot_time)\r\n  group by isnull(x.event_time,h.snapshot_time)\r\n  order by time asc",
          "refId": "A"
        }
      ],
      "transformations": [
        {
          "id": "filterFieldsByName",
          "options": {
            "include": {
              "names": [
                "Blocked"
              ]
            }
          }
        }
      ],
      "transparent": true,
      "type": "stat"
    },
    {
      "datasource": {
        "uid": "$DataSource"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "decimals": 0,
          "links": [],
          "mappings": [],
          "max": 1,
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "dark-green",
                "value": null
              },
              {
                "color": "light-orange",
                "value": 85
              },
              {
                "color": "red",
                "value": 95
              }
            ]
          },
          "unit": "percentunit"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Memory Low"
            },
            "properties": [
              {
                "id": "unit",
                "value": "none"
              },
              {
                "id": "mappings",
                "value": [
                  {
                    "options": {
                      "0": {
                        "text": "OK"
                      },
                      "1": {
                        "text": "Low"
                      }
                    },
                    "type": "value"
                  }
                ]
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "dark-green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 1
                    }
                  ]
                }
              },
              {
                "id": "displayName",
                "value": "Memory"
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 4,
        "w": 6,
        "x": 12,
        "y": 9
      },
      "id": 199,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "vertical",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "text": {},
        "textMode": "value_and_name"
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "alias": "",
          "datasource": {
            "uid": "$DataSource"
          },
          "format": "time_series",
          "hide": false,
          "rawSql": "SELECT \n      [time] = snapshot_time --$__timeGroup([snapshot_time], $aggregation) \n      ,[Memory] = AVG([physical_memory_in_use_kb]*1.0/([physical_memory_in_use_kb]+[available_commit_limit_kb]))\n      ,[Memory Low] = case when convert(int,process_physical_memory_low)+convert(int,process_virtual_memory_low) > 0 then 1 else 0 end\n  FROM [dbo].[vw_sqlwatch_report_fact_perf_os_process_memory]\n  WHERE 1 = 1\n  AND  $__timeFilter(snapshot_time)\n      and snapshot_time >= dateadd(minute,-15,getutcdate())\n  AND [sql_instance] = '$sql_instance'\n  GROUP BY snapshot_time --$__timeGroup([snapshot_time], $aggregation) \n  , case when convert(int,process_physical_memory_low)+convert(int,process_virtual_memory_low) > 0 then 1 else 0 end\nORDER BY\n  time ASC\n  \n  ",
          "refId": "A"
        }
      ],
      "transformations": [
        {
          "id": "filterFieldsByName",
          "options": {
            "include": {
              "names": [
                "Memory",
                "Memory Low"
              ]
            }
          }
        }
      ],
      "transparent": true,
      "type": "stat"
    },
    {
      "datasource": {
        "type": "datasource",
        "uid": "-- Dashboard --"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "decimals": 0,
          "displayName": "Max Latency",
          "links": [],
          "mappings": [],
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "dark-green",
                "value": null
              },
              {
                "color": "light-orange",
                "value": 20
              },
              {
                "color": "red",
                "value": 50
              }
            ]
          },
          "unit": "ms"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 3,
        "x": 18,
        "y": 9
      },
      "id": 230,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "vertical",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "text": {},
        "textMode": "value_and_name"
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "panelId": 15,
          "refId": "A"
        }
      ],
      "transformations": [
        {
          "id": "filterFieldsByName",
          "options": {
            "include": {
              "pattern": "/Max/"
            }
          }
        },
        {
          "id": "reduce",
          "options": {
            "reducers": [
              "lastNotNull"
            ]
          }
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "uid": "$DataSource"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "mappings": [],
          "max": 2,
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "dark-green",
                "value": null
              }
            ]
          }
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "OK"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "green",
                  "mode": "thresholds"
                }
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "dark-green",
                      "value": null
                    }
                  ]
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "WARNING"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "light-orange",
                  "mode": "thresholds"
                }
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "dark-green",
                      "value": null
                    },
                    {
                      "color": "light-orange",
                      "value": 1
                    }
                  ]
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "CRITICAL"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "red",
                  "mode": "thresholds"
                }
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "dark-green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 1
                    }
                  ]
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "CHECK ERROR"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "semi-dark-purple",
                  "mode": "thresholds"
                }
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "dark-green",
                      "value": null
                    },
                    {
                      "color": "dark-purple",
                      "value": 1
                    }
                  ]
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 4,
        "w": 3,
        "x": 21,
        "y": 9
      },
      "id": 246,
      "links": [],
      "options": {
        "colorMode": "background",
        "graphMode": "none",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "sum"
          ],
          "fields": "",
          "limit": 4,
          "values": true
        },
        "text": {},
        "textMode": "value_and_name"
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "alias": "",
          "datasource": {
            "uid": "$DataSource"
          },
          "format": "time_series",
          "hide": false,
          "rawSql": "SELECT time=getdate(),t.last_check_status,last_check_status_count=count(c.last_check_status)\r\n  FROM (\r\n    select last_check_status='OK' union all \r\n    select last_check_status = 'WARNING' union all \r\n    select last_check_status = 'CRITICAL' union all \r\n    select last_check_status = 'CHECK ERROR') t\r\n\r\n\touter apply (\r\n\t\tselect last_check_status = case when last_check_status is null then 'CHECK ERROR' else last_check_status end\r\n\t\tfrom [dbo].[sqlwatch_meta_check] mc\r\n\t\twhere [sql_instance] =  '$sql_instance'\r\n\t\tand case when last_check_status is null then 'CHECK ERROR' else last_check_status end = t.last_check_status\r\n\t\tand check_enabled = 1\r\n\t\t) c\r\ngroup by t.last_check_status\r\n\r\n   order by case t.last_check_status when  'OK' then 1 when 'WARNING' then 2 when 'CRITICAL' then 3 else 4 end ",
          "refId": "A"
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "uid": "$DataSource"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "rgb(105, 105, 105)",
            "mode": "thresholds"
          },
          "mappings": [],
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "dark-green",
                "value": null
              }
            ]
          },
          "unit": "short"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Batch Requests/sec"
            },
            "properties": [
              {
                "id": "unit",
                "value": "reqps"
              },
              {
                "id": "displayName",
                "value": "Batch Requests"
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Logins/sec"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Logins"
              },
              {
                "id": "unit",
                "value": "cps"
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "dark-green",
                      "value": null
                    },
                    {
                      "color": "light-orange",
                      "value": 2
                    },
                    {
                      "color": "red",
                      "value": 8
                    }
                  ]
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Transactions/sec"
            },
            "properties": [
              {
                "id": "unit",
                "value": "cps"
              },
              {
                "id": "displayName",
                "value": "Transactions"
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Availability Group Bytes"
            },
            "properties": [
              {
                "id": "unit",
                "value": "Bps"
              },
              {
                "id": "noValue",
                "value": "N/A"
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "SQL Compilations/sec"
            },
            "properties": [
              {
                "id": "unit",
                "value": "cps"
              },
              {
                "id": "displayName",
                "value": "SQL Compilations"
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 12,
        "w": 3,
        "x": 0,
        "y": 13
      },
      "id": 269,
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "horizontal",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "text": {
          "titleSize": 14,
          "valueSize": 20
        },
        "textMode": "auto"
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "alias": "",
          "datasource": {
            "uid": "$DataSource"
          },
          "format": "time_series",
          "hide": false,
          "rawSql": "select \r\n\t  time = pc.snapshot_time\r\n\t, 'CPU usage %' = sum(case \r\n\t      when 1=1 and mpc.counter_name = 'Processor Time %' then pc.[cntr_value_calculated] \r\n\t      --when serverproperty('EngineEdition') = 3 and mpc.counter_name = 'CPU usage %' then pc.[cntr_value_calculated] \r\n\t      --when serverproperty('EngineEdition') <> 3 and mpc.counter_name = 'Processor Time %' then pc.[cntr_value_calculated]\r\n\t      else null end)\r\n\t, 'Batch Requests/sec' = avg(case when mpc.counter_name = 'Batch Requests/sec' then pc.[cntr_value_calculated] else null end)\r\n\r\n\t, 'Logins/sec' = avg(case when mpc.counter_name = 'Logins/sec' then pc.[cntr_value_calculated] else null end)\r\n\t, 'Transactions/sec' = sum(case when mpc.counter_name = 'Transactions/sec' and pc.instance_name not in ('_Total','mssqlsystemresource') then pc.[cntr_value_calculated] else null end)\r\n\t, 'User Connections' = avg(case when mpc.counter_name = 'User Connections' then pc.[cntr_value_calculated] else null end)\r\n\t, 'SQL Compilations/sec' = avg(case when mpc.counter_name = 'SQL Compilations/sec' then pc.[cntr_value_calculated] else null end)\r\n\t, 'Availability Group Bytes' = avg(case when mpc.counter_name in ('Bytes Sent to Replica/sec','Bytes Received from Replica/sec') then pc.[cntr_value_calculated] else null end)\r\n  --\r\n  ,'Connection Memory (KB)' = avg(case when mpc.counter_name = 'Connection Memory (KB)' then pc.[cntr_value_calculated] else null end)\r\n  ,'Optimizer Memory (KB)' = avg(case when mpc.counter_name = 'Optimizer Memory (KB)' then pc.[cntr_value_calculated] else null end)\r\n  ,'SQL Cache Memory (KB)' = avg(case when mpc.counter_name = 'SQL Cache Memory (KB)' then pc.[cntr_value_calculated] else null end)\r\n  ,'Total Server Memory (KB)' = avg(case when mpc.counter_name = 'Total Server Memory (KB)' then pc.[cntr_value_calculated] else null end)\r\n  ,'Stolen Server Memory (KB)' = avg(case when mpc.counter_name = 'Stolen Server Memory (KB)' then pc.[cntr_value_calculated] else null end)\r\n  ,'Target Server Memory (KB)' = avg(case when mpc.counter_name = 'Target Server Memory (KB)' then pc.[cntr_value_calculated] else null end)\r\nfrom [dbo].[sqlwatch_logger_perf_os_performance_counters] pc\r\n\r\ninner join [dbo].[sqlwatch_meta_performance_counter] mpc\r\n\ton pc.sql_instance = mpc.sql_instance\r\n\tand pc.performance_counter_id = mpc.performance_counter_id\r\n\t\r\nwhere $__timeFilter(pc.snapshot_time)\r\nand pc.snapshot_time >= dateadd(minute,-15,getutcdate())\r\nand pc.[sql_instance] = '$sql_instance'\r\nand mpc.counter_name in ('CPU usage %'\r\n  ,'Batch Requests/sec'\r\n  ,'Logins/sec'\r\n  ,'Transactions/sec'\r\n  ,'User Connections'\r\n  ,'SQL Compilations/sec'\r\n  ,'Bytes Sent to Replica/sec'\r\n  ,'Bytes Received from Replica/sec'\r\n  ,'Processor Time %'\r\n  ,'% Processor Time'\r\n  \r\n  ,'Connection Memory (KB)'\r\n  ,'Optimizer Memory (KB)'\r\n  ,'SQL Cache Memory (KB)'\r\n  ,'Total Server Memory (KB)'\r\n  ,'Stolen Server Memory (KB)'\r\n  , 'Target Server Memory (KB)'\r\n  )\r\n\r\ngroup by pc.snapshot_time\r\norder by time asc",
          "refId": "SQL Server Perf Counters"
        }
      ],
      "title": "Activity",
      "transformations": [
        {
          "id": "seriesToColumns",
          "options": {
            "byField": "Time"
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "CPU usage %": true,
              "Connection Memory (KB)": true,
              "Optimizer Memory (KB)": true,
              "SQL Cache Memory (KB)": true,
              "SQL Compilations/sec": true,
              "Stolen Server Memory (KB)": true,
              "Target Server Memory (KB)": true,
              "Time": true,
              "Total Server Memory (KB)": true,
              "Wait Time": true
            },
            "indexByName": {
              "Batch Requests/sec": 1,
              "Logins/sec": 3,
              "SQL Compilations/sec": 2,
              "Time": 0,
              "Transactions/sec": 4,
              "User Connections": 5
            },
            "renameByName": {
              "Bytes Received from Replica/sec": "AG: to Replica",
              "Bytes Sent to Replica/sec": "AG: from Replica"
            }
          }
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "mssql",
        "uid": "$DataSource"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "rgb(105, 105, 105)",
            "mode": "thresholds"
          },
          "links": [],
          "mappings": [],
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "rgb(30, 69, 24)",
                "value": null
              },
              {
                "color": "light-orange",
                "value": 800
              },
              {
                "color": "red",
                "value": 1000
              }
            ]
          },
          "unit": "ms"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 12,
        "w": 3,
        "x": 3,
        "y": 13
      },
      "id": 102,
      "links": [],
      "options": {
        "colorMode": "background",
        "graphMode": "none",
        "justifyMode": "auto",
        "orientation": "horizontal",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "limit": 15,
          "values": false
        },
        "text": {
          "titleSize": 14,
          "valueSize": 16
        },
        "textMode": "value_and_name"
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "alias": "",
          "datasource": {
            "uid": "$DataSource"
          },
          "editorMode": "code",
          "format": "time_series",
          "hide": false,
          "rawQuery": true,
          "rawSql": "SELECT \n      [time] = snapshot_time --$__timeGroup([snapshot_time], $aggregation) \n      ,[Wait Type] = case when len([wait])>19 then left([wait],19) + '...' else [wait] end\n      ,[Wait Time] = sum([wait_time_ms_per_second]) \n      --,[Total] = sum([wait_time_ms_per_second]) over (partition by snapshot_time)\n  FROM (SELECT wait_time_ms_per_second, wait= case when '$Waits' = 'Category' then [wait_category] else LOWER([wait_type]) end, snapshot_time, RN=ROW_NUMBER() over (partition by wait_category order by wait_time_ms_per_second desc)\n    FROM [dbo].[vw_sqlwatch_report_fact_perf_os_wait_stats] \n      WHERE 1=1\n      AND $__timeFilter(snapshot_time)\n        and snapshot_time >= dateadd(minute,-15,getutcdate())\n      AND [sql_instance] = '$sql_instance'\n  ) t\n  WHERE 1=1 --t.RN = 1\n  GROUP BY case when len([wait])>19 then left([wait],19) + '...' else [wait] end\n      ,snapshot_time --$__timeGroup([snapshot_time], $aggregation) \n      \nORDER BY\n  time asc\n  \n  ",
          "refId": "A",
          "sql": {
            "columns": [
              {
                "parameters": [],
                "type": "function"
              }
            ],
            "groupBy": [
              {
                "property": {
                  "type": "string"
                },
                "type": "groupBy"
              }
            ],
            "limit": 50
          }
        }
      ],
      "title": "Top Waits by Total Time",
      "transformations": [
        {
          "id": "filterFieldsByName",
          "options": {
            "include": {
              "pattern": ""
            }
          }
        },
        {
          "id": "renameByRegex",
          "options": {
            "regex": "(.Wait Time)",
            "renamePattern": ""
          }
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "uid": "$DataSource"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "dark-green",
            "mode": "fixed"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "dark-green",
                "value": null
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 12,
        "w": 3,
        "x": 6,
        "y": 13
      },
      "id": 299,
      "options": {
        "displayMode": "basic",
        "minVizHeight": 10,
        "minVizWidth": 0,
        "orientation": "horizontal",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showUnfilled": false,
        "text": {
          "titleSize": 12,
          "valueSize": 16
        }
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "alias": "",
          "datasource": {
            "uid": "$DataSource"
          },
          "format": "time_series",
          "hide": false,
          "rawSql": "SELECT time = r1.snapshot_time\r\n      ,[running] = avg(running)\r\n      ,[sleeping] = avg(sleeping)\r\n      ,[dormant] = avg(dormant)\r\n      ,[preconnect] = avg(preconnect)\r\n      ,[cpu_time] = avg(cpu_time)\r\n      ,[reads] = avg(reads)\r\n      ,[writes] = avg(writes)\r\n      ,  type = case when type = 1 then 'User' else 'System' end\r\n  FROM [sqlwatch_logger_dm_exec_sessions_stats] r1 (nolock)\r\n\twhere $__timeFilter(r1.snapshot_time)\r\n  and snapshot_time > dateadd(minute,-15,GETUTCDATE())\t\r\n  and r1.sql_instance = '$sql_instance'\r\n  group by r1.snapshot_time, case when type = 1 then 'User' else 'System' end\r\n  order by time asc",
          "refId": "2"
        }
      ],
      "title": "Sessions",
      "transformations": [
        {
          "id": "seriesToColumns",
          "options": {
            "byField": "Time"
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "System cpu_time": true,
              "System reads": true,
              "System writes": true,
              "User cpu_time": true,
              "User reads": true,
              "User writes": true,
              "cpu_time": true,
              "reads": true,
              "writes": true
            },
            "indexByName": {
              "Time": 0,
              "max": 3,
              "min": 4,
              "sql": 2,
              "system": 1
            },
            "renameByName": {}
          }
        }
      ],
      "type": "bargauge"
    },
    {
      "datasource": {
        "uid": "$DataSource"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "dark-green",
            "mode": "thresholds"
          },
          "decimals": 0,
          "links": [],
          "mappings": [],
          "min": 0,
          "noValue": "0",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "dark-green",
                "value": null
              }
            ]
          }
        },
        "overrides": [
          {
            "matcher": {
              "id": "byRegexp",
              "options": "Waiting|Suspended|Runnable"
            },
            "properties": [
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "dark-green",
                      "value": null
                    },
                    {
                      "color": "light-orange",
                      "value": 1
                    },
                    {
                      "color": "red",
                      "value": 2
                    }
                  ]
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 12,
        "w": 3,
        "x": 9,
        "y": 13
      },
      "id": 296,
      "options": {
        "displayMode": "basic",
        "minVizHeight": 10,
        "minVizWidth": 0,
        "orientation": "horizontal",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showUnfilled": false,
        "text": {
          "titleSize": 12,
          "valueSize": 16
        }
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "alias": "",
          "datasource": {
            "uid": "$DataSource"
          },
          "format": "time_series",
          "hide": false,
          "rawSql": "SELECT time = r1.snapshot_time\r\n      ,  Background\t= background\r\n      ,  Running = running\r\n      ,  Runnable = runnable\r\n      ,  Sleeping\t = sleeping\r\n      ,  Suspended\t = suspended\r\n      ,  Waiting\t = waiting_tasks\r\n  FROM [sqlwatch_logger_dm_exec_requests_stats] r1 (nolock)\r\n\twhere $__timeFilter(r1.snapshot_time)\r\n\tand type = 1\r\n\tand r1.snapshot_time > dateadd(minute,-15,getutcdate())\r\n  and r1.sql_instance = '$sql_instance'\r\n    order by time asc",
          "refId": "A"
        }
      ],
      "title": "User Requests",
      "transformations": [
        {
          "id": "filterFieldsByName",
          "options": {}
        }
      ],
      "type": "bargauge"
    },
    {
      "datasource": {
        "type": "datasource",
        "uid": "-- Dashboard --"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "green",
            "mode": "thresholds"
          },
          "decimals": 0,
          "links": [],
          "mappings": [],
          "min": 0,
          "noValue": "0",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "dark-green",
                "value": null
              },
              {
                "color": "dark-green",
                "value": 1
              }
            ]
          },
          "unit": "deckbytes"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Memory Deficit"
            },
            "properties": [
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "dark-green",
                      "value": null
                    },
                    {
                      "color": "light-orange",
                      "value": 1024
                    },
                    {
                      "color": "red",
                      "value": 1025
                    }
                  ]
                }
              },
              {
                "id": "noValue",
                "value": "0"
              },
              {
                "id": "mappings",
                "value": [
                  {
                    "options": {
                      "from": -10000000000000000,
                      "result": {
                        "text": "0"
                      },
                      "to": 0
                    },
                    "type": "range"
                  }
                ]
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 12,
        "w": 3,
        "x": 12,
        "y": 13
      },
      "id": 300,
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "horizontal",
        "reduceOptions": {
          "calcs": [
            "last"
          ],
          "fields": "/.*/",
          "values": false
        },
        "text": {
          "titleSize": 12,
          "valueSize": 16
        },
        "textMode": "value_and_name"
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "panelId": 269,
          "refId": "A"
        }
      ],
      "title": "SQL Memory",
      "transformations": [
        {
          "id": "filterFieldsByName",
          "options": {
            "include": {
              "names": [
                "Connection Memory (KB)",
                "Optimizer Memory (KB)",
                "SQL Cache Memory (KB)",
                "Total Server Memory (KB)",
                "Stolen Server Memory (KB)",
                "Target Server Memory (KB)",
                "Time"
              ]
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Memory Deficit",
            "binary": {
              "left": "Target Server Memory (KB)",
              "operator": "-",
              "reducer": "sum",
              "right": "Total Server Memory (KB)"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            },
            "replaceFields": false
          }
        },
        {
          "id": "renameByRegex",
          "options": {
            "regex": "(\\(KB\\))",
            "renamePattern": ""
          }
        },
        {
          "id": "filterFieldsByName",
          "options": {
            "include": {
              "names": [
                "Connection Memory ",
                "Optimizer Memory ",
                "SQL Cache Memory ",
                "Total Server Memory ",
                "Stolen Server Memory ",
                "Target Server Memory ",
                "Memory Deficit"
              ]
            }
          }
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "datasource",
        "uid": "-- Dashboard --"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "rgb(105, 105, 105)",
            "mode": "thresholds"
          },
          "decimals": 0,
          "links": [],
          "mappings": [],
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "dark-green",
                "value": null
              }
            ]
          },
          "unit": "Bps"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 12,
        "w": 3,
        "x": 15,
        "y": 13
      },
      "id": 295,
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "horizontal",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "text": {
          "titleSize": 12,
          "valueSize": 16
        },
        "textMode": "auto"
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "panelId": 15,
          "refId": "A"
        }
      ],
      "title": "Disk IO",
      "transformations": [
        {
          "id": "filterFieldsByName",
          "options": {
            "include": {
              "pattern": "/IO/"
            }
          }
        },
        {
          "id": "renameByRegex",
          "options": {
            "regex": "(.IO$)",
            "renamePattern": ""
          }
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "uid": "$DataSource"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "decimals": 0,
          "links": [],
          "mappings": [],
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "dark-green",
                "value": null
              },
              {
                "color": "light-orange",
                "value": 20
              },
              {
                "color": "red",
                "value": 50
              }
            ]
          },
          "unit": "ms"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 12,
        "w": 3,
        "x": 18,
        "y": 13
      },
      "id": 15,
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "horizontal",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "text": {
          "titleSize": 12,
          "valueSize": 16
        },
        "textMode": "auto"
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "alias": "",
          "datasource": {
            "uid": "$DataSource"
          },
          "format": "time_series",
          "hide": false,
          "rawSql": "SELECT \n      [time] = snapshot_time \n      ,[Latency Reads] = MAX(fs.[io_latency_read])\n      ,[Latency Writes] = MAX(fs.[io_latency_write])\n  \t  ,[Reads IO] = AVG(fs.bytes_read_per_second)\n  \t  ,[Writes IO] = AVG(fs.bytes_written_per_second)\n      ,[Disk] = left(upper([file_physical_name]),2) + ' ' + isnull(v.label,'')\n      ,[Max Latency] = max(case when fs.[io_latency_read] > fs.[io_latency_write] then fs.[io_latency_read] else fs.[io_latency_write] end) over (partition by snapshot_time )\n  FROM [dbo].[vw_sqlwatch_report_fact_perf_file_stats] fs\n  outer apply (\n    select top 1 label \n    from [dbo].[sqlwatch_meta_os_volume] v\n\t  where v.volume_name = left(fs.file_physical_name,3)) v\n  WHERE 1 = 1\n  AND $__timeFilter(fs.snapshot_time)\n    and snapshot_time >= dateadd(minute,-15,getutcdate())\n  AND [sql_instance] = '$sql_instance'\n  AND database_name IN ($database)\n  GROUP BY fs.snapshot_time \n  , left(upper([file_physical_name]),2) + ' ' + isnull(v.label,'')\n  ,case when fs.[io_latency_read] > fs.[io_latency_write] then fs.[io_latency_read] else fs.[io_latency_write] end\nORDER BY\n  time ASC",
          "refId": "File Stats"
        }
      ],
      "title": "Disk Latency",
      "transformations": [
        {
          "id": "renameByRegex",
          "options": {
            "regex": "(.Max Latency)",
            "renamePattern": "IGNORE"
          }
        },
        {
          "id": "filterFieldsByName",
          "options": {
            "include": {
              "pattern": "/Latency/"
            }
          }
        },
        {
          "id": "renameByRegex",
          "options": {
            "regex": "(.Latency)",
            "renamePattern": ""
          }
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "mssql",
        "uid": "$DataSource"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "links": [],
          "mappings": [
            {
              "options": {
                "0": {
                  "text": "OK"
                },
                "1": {
                  "text": "WARNING"
                },
                "2": {
                  "text": "CRITICAL"
                },
                "3": {
                  "text": "CHECK ERROR"
                }
              },
              "type": "value"
            }
          ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "rgba(115, 191, 105, 0)",
                "value": null
              },
              {
                "color": "rgb(30, 69, 24)",
                "value": 0
              },
              {
                "color": "light-orange",
                "value": 1
              },
              {
                "color": "red",
                "value": 2
              },
              {
                "color": "dark-purple",
                "value": 3
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 12,
        "w": 3,
        "x": 21,
        "y": 13
      },
      "id": 224,
      "options": {
        "colorMode": "background",
        "graphMode": "none",
        "justifyMode": "auto",
        "orientation": "horizontal",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "limit": 15,
          "values": false
        },
        "text": {
          "titleSize": 14,
          "valueSize": 13
        },
        "textMode": "name"
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "alias": "",
          "datasource": {
            "uid": "$DataSource"
          },
          "editorMode": "code",
          "format": "time_series",
          "hide": false,
          "rawQuery": true,
          "rawSql": "SELECT  top 15 time=isnull(last_check_date,getutcdate()),[check_name] = CASE WHEN LEN([check_name]) > 28 THEN LEFT(check_name,27) + '...' ELSE [check_name] END\n        ,status = CASE [last_check_status] \n        WHEN 'CRITICAL' THEN 2\n        WHEN 'WARNING' THEN 1\n        WHEN 'OK' THEN 0\n        ELSE 3 END\n  FROM (select last_check_date , check_name = (replace(replace([check_name],'Database',''),' failure count',''))\n    , last_check_status = case when last_check_status is null then 'CHECK ERROR' else last_check_status end\n  from [dbo].[vw_sqlwatch_report_dim_check] with (nolock)\n  WHERE  [target_sql_instance] = '$sql_instance'\n  AND check_enabled = 1\n  ) t\n  where last_check_status <> 'ok'\n  --AND $__timeFilter(last_check_date)\n  --AND last_check_status IN ($Status)\n  order by case when last_check_status = 'OK' then dateadd(month,-12,last_check_date) else isnull(last_check_date,getutcdate()) end asc",
          "refId": "A",
          "sql": {
            "columns": [
              {
                "parameters": [],
                "type": "function"
              }
            ],
            "groupBy": [
              {
                "property": {
                  "type": "string"
                },
                "type": "groupBy"
              }
            ],
            "limit": 50
          }
        }
      ],
      "title": "Checks",
      "transformations": [
        {
          "id": "labelsToFields",
          "options": {
            "mode": "columns",
            "valueLabel": "check_name"
          }
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "mssql",
        "uid": "EeAYXKY4k"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 25
      },
      "id": 297,
      "options": {
        "code": {
          "language": "plaintext",
          "showLineNumbers": false,
          "showMiniMap": false
        },
        "content": " ",
        "mode": "html"
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "queryType": "randomWalk",
          "refId": "A"
        }
      ],
      "transparent": true,
      "type": "text"
    },
    {
      "datasource": {
        "uid": "$DataSource"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "rgb(51, 51, 51)",
            "mode": "fixed"
          },
          "decimals": 0,
          "links": [],
          "mappings": [],
          "max": 1,
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "dark-green",
                "value": null
              }
            ]
          },
          "unit": "none"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byRegexp",
              "options": "/Size/"
            },
            "properties": [
              {
                "id": "unit",
                "value": "decbytes"
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": "/Growth/"
            },
            "properties": [
              {
                "id": "unit",
                "value": "decbytes"
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 5,
        "w": 4,
        "x": 0,
        "y": 26
      },
      "id": 225,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "horizontal",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "text": {
          "titleSize": 14,
          "valueSize": 16
        },
        "textMode": "value_and_name"
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "alias": "",
          "datasource": {
            "uid": "$DataSource"
          },
          "format": "table",
          "hide": false,
          "rawSql": "select \r\n\t  s.servername\r\n\t, 'All Databases' = [Databases]\r\n\t, 'Total Data Size' = [Data Size]\r\n\t, 'Total Growth Per Day' = [Growth per day]\r\n\t, 'All Agent Jobs' = [Jobs]\r\nfrom dbo.sqlwatch_meta_server s\r\n\r\nouter apply (\r\n\tselect\r\n\t  [Databases]=count(db.database_name)\r\n\t, [Data Size]=sum([database_size_bytes_current])\r\n\t, [Growth per day]=sum(database_growth_bytes_per_day)\r\n\tfrom [dbo].[vw_sqlwatch_report_dim_database] db\r\n\twhere db.sql_instance = s.sql_instance\r\n) dbs\r\n\r\nouter apply (\r\n\tselect \r\n\t\t[Jobs]=count(jb.job_name)\r\n\tfrom [dbo].[vw_sqlwatch_report_dim_agent_job] jb\r\n\twhere jb.sql_instance = s.sql_instance\r\n) jbs",
          "refId": "Basic Stats"
        },
        {
          "alias": "",
          "datasource": {
            "uid": "$DataSource"
          },
          "format": "table",
          "hide": false,
          "rawSql": "select \r\n\t  s.servername\r\n\t, 'SQLWATCH Data Size' = [Data Size]\r\n\t, 'SQLWATCH Growth Per Day' = [Growth per day]\r\nfrom dbo.sqlwatch_meta_server s\r\n\r\nouter apply (\r\n\tselect\r\n\t  [Databases]=count(db.database_name)\r\n\t, [Data Size]=sum([database_size_bytes_current])\r\n\t, [Growth per day]=sum(database_growth_bytes_per_day)\r\n\tfrom [dbo].[vw_sqlwatch_report_dim_database] db\r\n\twhere db.sql_instance = s.sql_instance\r\n\tand db.database_name = DB_NAME()\r\n) dbs\r\n",
          "refId": "A"
        }
      ],
      "transformations": [
        {
          "id": "seriesToColumns",
          "options": {
            "byField": "servername"
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "SQLWATCH Database": false
            },
            "indexByName": {
              "All Agent Jobs": 4,
              "All Databases": 1,
              "SQLWATCH Data Size": 5,
              "SQLWATCH Growth Per Day": 6,
              "Total Data Size": 2,
              "Total Growth Per Day": 3,
              "servername": 0
            },
            "renameByName": {}
          }
        }
      ],
      "transparent": true,
      "type": "stat"
    },
    {
      "datasource": {
        "type": "mssql",
        "uid": "${DataSource}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "decimals": 0,
          "mappings": [],
          "max": 1,
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "dark-green",
                "value": null
              },
              {
                "color": "orange",
                "value": 0.8
              },
              {
                "color": "red",
                "value": 0.95
              }
            ]
          },
          "unit": "percentunit"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 5,
        "w": 6,
        "x": 4,
        "y": 26
      },
      "id": 293,
      "options": {
        "displayMode": "basic",
        "minVizHeight": 10,
        "minVizWidth": 0,
        "orientation": "horizontal",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showUnfilled": true,
        "text": {
          "titleSize": 12,
          "valueSize": 16
        }
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "alias": "",
          "datasource": {
            "uid": "${DataSource}"
          },
          "editorMode": "code",
          "format": "time_series",
          "queryType": "randomWalk",
          "rawQuery": true,
          "rawSql": "select time=date_last_seen, disk=left([volume_name],2)+ ' ' + isnull(label,''),1.0-[free_space_percentage]\nfrom [dbo].[vw_sqlwatch_report_dim_os_volume] \nwhere sql_instance = '$sql_instance'\norder by left([volume_name],2) asc",
          "refId": "A",
          "sql": {
            "columns": [
              {
                "parameters": [],
                "type": "function"
              }
            ],
            "groupBy": [
              {
                "property": {
                  "type": "string"
                },
                "type": "groupBy"
              }
            ],
            "limit": 50
          }
        }
      ],
      "title": "Disk Space Used %",
      "type": "bargauge"
    },
    {
      "datasource": {
        "type": "mssql",
        "uid": "EeAYXKY4k"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 31
      },
      "id": 305,
      "options": {
        "code": {
          "language": "plaintext",
          "showLineNumbers": false,
          "showMiniMap": false
        },
        "content": " ",
        "mode": "html"
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "queryType": "randomWalk",
          "refId": "A"
        }
      ],
      "transparent": true,
      "type": "text"
    },
    {
      "collapsed": true,
      "datasource": {
        "type": "mssql",
        "uid": "EeAYXKY4k"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 32
      },
      "id": 257,
      "panels": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 33
          },
          "id": 159,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "# SQL Server Blocking Chains\r\n*****\r\nBlocking chains happen when one query is holding back other queries. This happens when poorly written query is holding excessive and exclusive locks on tables. Relational databases are written with ACID properties in mind, \r\nthis means that in order to retain data integrity, only one query at a time can modify the data. To achieve this, a lock is applied so no other queries can even read the data to avoid partially written data being displayed back to the client. When blocking chains happen for long period of time, you will have the impression that the database is slow, even though it isn't. It's just doing its job. It is important to undertand how locking works to avoid blocking chains.\r\n\r\nThese graphs come from data recorded in the Extended Events Session. For this to work, you must enable blocked process monitor: `sp_configure 'blocked process threshold', 5 ; -- set desired value in seconds`",
            "mode": "markdown"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "decimals": 0,
          "description": "",
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 39
          },
          "hiddenSeries": false,
          "id": 101,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": false,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 3,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:1355",
              "alias": "Blocking Session Count",
              "color": "#F2495C"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT time = $__timeGroup(h.snapshot_time, $aggregation, previous)\r\n      ,[Blocking Session Count] = count(session_id)\r\n  FROM dbo.sqlwatch_logger_snapshot_header h\r\n  left join [dbo].[ufn_sqlwatch_get_blocking_chains] ($__timeFrom(), $__timeTo(),'$sql_instance') r1\r\n  on h.snapshot_time = r1.snapshot_time\r\n  and h.snapshot_type_id = r1.snapshot_type_id\r\n  and h.sql_instance = r1.sql_instance\r\n  and blocking_session_id is null -- header only  \r\n  where $__timeFilter(h.snapshot_time)\r\n  and h.snapshot_type_id = 9\r\n  group by $__timeGroup(h.snapshot_time, $aggregation, previous), convert(varchar(10),session_id)\r\n \r\n  order by time asc",
              "refId": "2"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Blocking Sessions Count",
          "tooltip": {
            "shared": false,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "seriesToColumns",
              "options": {
                "byField": "Time"
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {},
                "indexByName": {
                  "Time": 0,
                  "max": 3,
                  "min": 4,
                  "sql": 2,
                  "system": 1
                },
                "renameByName": {}
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:1165",
              "decimals": 0,
              "format": "short",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:1166",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 2,
            "w": 24,
            "x": 0,
            "y": 45
          },
          "id": 276,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "The Extended Events Session captures blocking chains according to the time set for the Blocking Process Monitor `select * from sys.configurations where name like 'blocked process threshold%`.\r\nFor example, if the monitor is set to 5 seconds and we have a blocking chain lasting 21 seconds, it will record it 4 times, every 5 seconds. All four occurences will be shown below.",
            "mode": "markdown"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "datasource": {
            "uid": "${DataSource}"
          },
          "description": "",
          "gridPos": {
            "h": 10,
            "w": 24,
            "x": 0,
            "y": 47
          },
          "id": 255,
          "options": {
            "dedupStrategy": "none",
            "enableLogDetails": true,
            "prettifyLogMessage": false,
            "showCommonLabels": false,
            "showLabels": false,
            "showTime": true,
            "sortOrder": "Descending",
            "wrapLogMessage": false
          },
          "pluginVersion": "7.4.2",
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "${DataSource}"
              },
              "format": "table",
              "queryType": "randomWalk",
              "rawSql": "select time=x.event_time, blocking_tree + ' (' + isnull(x.appname,'') + '; ' + isnull(x.hostname,'') + ') SQL: ' + isnull(x.sql_text,'') \nfrom [dbo].[ufn_sqlwatch_get_blocking_chains] ($__timeFrom(), $__timeTo(),'$sql_instance') x\n\norder by time",
              "refId": "Blocking Chains"
            }
          ],
          "title": "Blocking Chains",
          "transparent": true,
          "type": "logs"
        }
      ],
      "targets": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "refId": "A"
        }
      ],
      "title": "$sql_instance: SQL Server Blocking",
      "type": "row"
    },
    {
      "collapsed": true,
      "datasource": {
        "type": "mssql",
        "uid": "EeAYXKY4k"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 33
      },
      "id": 263,
      "panels": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 9,
            "w": 24,
            "x": 0,
            "y": 58
          },
          "id": 265,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "# SQL Server Requests\r\n*****\r\nList of current requests sampled from `dm_exec_requests`.\r\n\r\n**Runnable** - The session has been assigned a worker thread but it is waiting for CPU to become available.\r\nMany runnable threads would indicate CPU bottleneck.\r\n\r\n**Pending** - The session is awaiting a worker thread to be assigned. Unitil a workthread is assigned the session will not run even if the CPU is available.\r\nIn most cases, the worker will not be assigned due to CPU bottlenecks but in some cases, you may encounter a thread exhaustion.\r\nThis is a scenerio where SQL Server ran out of threads to allocate.\r\n\r\n**Suspended** - The session was running but has been put on hold due to lack of resources. Suspended session will likely have `wait_type` assigned to them.\r\n\r\n**Sleeping** - Sessions that SQL Server has put \"to sleep\" as they are not doing anything or could have ended recently but the connetion is still open. \r\nThis may be often observed with .NET Connection pooling. \r\n\r\nThis data provides a very high level view of the SQL Server Requests and Sessions. Becuase of the data sampling, we could be misssing a lot of the workload that happens between samples. However, this is by design, we do not want to capture too much of meaningless workload. Any transactions that cause trouble will be captured by Extended Events",
            "mode": "markdown"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": true,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 7,
            "w": 24,
            "x": 0,
            "y": 67
          },
          "hiddenSeries": false,
          "id": 264,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": false,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2019",
              "alias": "running",
              "color": "#37872D"
            },
            {
              "$$hashKey": "object:2027",
              "alias": "suspended",
              "color": "#FFB357"
            },
            {
              "$$hashKey": "object:2035",
              "alias": "runnable",
              "color": "#F2495C"
            },
            {
              "$$hashKey": "object:636",
              "alias": "sleeping",
              "color": "#1F60C4"
            },
            {
              "$$hashKey": "object:644",
              "alias": "waiting_tasks",
              "color": "#8F3BB8"
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT time = $__timeGroup(r1.snapshot_time, $aggregation,0)\r\n      ,  background\t= avg(background)\r\n      ,  running = avg(running)\t\r\n      ,  runnable = avg(runnable)\t\r\n      ,  sleeping\t = avg(sleeping)\r\n      ,  suspended\t = avg(suspended)\r\n      ,  waiting_tasks\t = avg(waiting_tasks)\r\n     -- ,  wait_duration_ms = avg(wait_duration_ms)\r\n      ,  type = case when type = 1 then 'User' else 'System' end\r\n  FROM [sqlwatch_logger_dm_exec_requests_stats] r1 (nolock)\r\n\twhere $__timeFilter(r1.snapshot_time)\r\n  and r1.sql_instance = '$sql_instance'\r\n  and type = 1\r\n  group by $__timeGroup(r1.snapshot_time, $aggregation,0), case when type = 1 then 'User' else 'System' end\r\n  order by time asc",
              "refId": "2"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "User Requests by Status",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "seriesToColumns",
              "options": {
                "byField": "Time"
              }
            },
            {
              "id": "renameByRegex",
              "options": {
                "regex": "(^User.)",
                "renamePattern": ""
              }
            },
            {
              "id": "organize",
              "options": {}
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:1699",
              "decimals": 0,
              "format": "short",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:1700",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 3,
            "w": 24,
            "x": 0,
            "y": 74
          },
          "id": 272,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "# SQL Server Sessions\r\n*****\r\nList of current sessions sampled from `dm_exec_sessions`.\r\n",
            "mode": "markdown"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 7,
            "w": 24,
            "x": 0,
            "y": 77
          },
          "hiddenSeries": false,
          "id": 271,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2019",
              "alias": "running",
              "color": "#37872D"
            },
            {
              "$$hashKey": "object:2027",
              "alias": "sleeping",
              "color": "#1F60C4",
              "fill": 0,
              "yaxis": 2
            },
            {
              "$$hashKey": "object:2035",
              "alias": "dormant",
              "color": "#3274D9"
            },
            {
              "$$hashKey": "object:596",
              "alias": "preconnect",
              "color": "#8AB8FF"
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT time = $__timeGroup(r1.snapshot_time, $aggregation)\r\n      ,[running] = avg(running)\r\n      ,[sleeping] = avg(sleeping)\r\n      ,[dormant] = avg(dormant)\r\n      ,[preconnect] = avg(preconnect)\r\n      ,[cpu_time] = avg(cpu_time)\r\n      ,[reads] = avg(reads)\r\n      ,[writes] = avg(writes)\r\n      ,  type = case when type = 1 then 'User' else 'System' end\r\n  FROM [sqlwatch_logger_dm_exec_sessions_stats] r1 (nolock)\r\n\twhere $__timeFilter(r1.snapshot_time)\r\n  and r1.sql_instance = '$sql_instance'\r\n  and type = 1\r\n  group by $__timeGroup(r1.snapshot_time, $aggregation), case when type = 1 then 'User' else 'System' end\r\n  order by time asc",
              "refId": "2"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "User Sessions by Status",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "seriesToColumns",
              "options": {
                "byField": "Time"
              }
            },
            {
              "id": "renameByRegex",
              "options": {
                "regex": "(^User.)",
                "renamePattern": ""
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "User cpu_time": true,
                  "User reads": true,
                  "User writes": true,
                  "cpu_time": true,
                  "reads": true,
                  "writes": true
                },
                "indexByName": {
                  "Time": 0,
                  "max": 3,
                  "min": 4,
                  "sql": 2,
                  "system": 1
                },
                "renameByName": {}
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:1699",
              "decimals": 0,
              "format": "short",
              "label": "",
              "logBase": 2,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:1700",
              "decimals": 0,
              "format": "short",
              "label": "",
              "logBase": 10,
              "min": "0",
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "description": "",
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 7,
            "w": 24,
            "x": 0,
            "y": 84
          },
          "hiddenSeries": false,
          "id": 277,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "connected",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "datasource",
                "uid": "-- Dashboard --"
              },
              "panelId": 271,
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "User Sessions by Resource",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "seriesToColumns",
              "options": {
                "byField": "Time"
              }
            },
            {
              "id": "renameByRegex",
              "options": {
                "regex": "(^User.)",
                "renamePattern": ""
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "User cpu_time": true,
                  "User reads": true,
                  "User writes": true,
                  "cpu_time": false,
                  "dormant": true,
                  "preconnect": true,
                  "reads": false,
                  "running": true,
                  "sleeping": true,
                  "writes": false
                },
                "indexByName": {
                  "Time": 0,
                  "max": 3,
                  "min": 4,
                  "sql": 2,
                  "system": 1
                },
                "renameByName": {}
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:1699",
              "decimals": 0,
              "format": "short",
              "label": "Active",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:1700",
              "decimals": 0,
              "format": "short",
              "label": "Sleeping",
              "logBase": 10,
              "min": "0",
              "show": false
            }
          ],
          "yaxis": {
            "align": false
          }
        }
      ],
      "targets": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "refId": "A"
        }
      ],
      "title": "$sql_instance: SQL Server Requests and Sessions",
      "type": "row"
    },
    {
      "collapsed": true,
      "datasource": {
        "type": "mssql",
        "uid": "EeAYXKY4k"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 34
      },
      "id": 187,
      "panels": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 5,
            "w": 24,
            "x": 0,
            "y": 35
          },
          "id": 259,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "# SQL Server Activity and Workload\r\n*****\r\n## CPU\r\nThe CPU chart is split into System (OS) and SQL Server. In an ideal scenario, all of the utilistaison should be allocated to SQL Server and only very small amount to system. SQL Server is also licensed per core, the more CPU cores the most expensive the license. You do not want to be paying a lot of money and not use it. [See Long Queries captured during this period](/d/sqlwatch-long-queries/long-queries?${__url_time_range}&var-DataSource=${DataSource}&var-sql_instance=${sql_instance})\r\nIf you are seeing a lot of OS Utilisation but not a lot of SQL Server utilistaion it means there is something else in the OS that uses CPU. It could be that you are running multiple SQL Instances?",
            "mode": "markdown"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 1,
          "gridPos": {
            "h": 7,
            "w": 24,
            "x": 0,
            "y": 40
          },
          "hiddenSeries": false,
          "id": 258,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:801",
              "alias": "OS",
              "color": "#F2495C",
              "fill": 3,
              "fillGradient": 0,
              "lines": true
            },
            {
              "$$hashKey": "object:802",
              "alias": "SQL Server",
              "color": "#73BF69",
              "fill": 0,
              "fillGradient": 2
            },
            {
              "$$hashKey": "object:803",
              "alias": "max",
              "color": "#8F3BB8",
              "fillBelowTo": "min",
              "legend": false,
              "lines": false,
              "stack": false,
              "zindex": -1
            },
            {
              "$$hashKey": "object:804",
              "alias": "min",
              "color": "#8F3BB8",
              "legend": false,
              "lines": false,
              "stack": false,
              "zindex": -1
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT \n      [time] = $__timeGroup([snapshot_time], $aggregation, previous)\n      ,[min] = min([cntr_value_calculated])\n      ,[max] = max([cntr_value_calculated])\n  FROM (\n    select snapshot_time, [cntr_value_calculated]=sum([cntr_value_calculated])\n    from [dbo].[sqlwatch_logger_perf_os_performance_counters] pc (readpast)\n\t\tinner join [dbo].[sqlwatch_meta_performance_counter] mpc  (readpast)\n\t\t\ton pc.sql_instance = mpc.sql_instance\n\t\t\tand pc.performance_counter_id = mpc.performance_counter_id      \n    WHERE $__timeFilter(pc.snapshot_time)\n  AND mpc.counter_name =  'Processor Time %' --case when serverproperty('EngineEdition') = 3 then 'CPU usage %' else 'Processor Time %' end\n  --and pc.instance_name NOT IN ('internal')\n  AND pc.[sql_instance] = '$sql_instance'    \n    group by snapshot_time\n  ) t\n  GROUP BY $__timeGroup([snapshot_time], $aggregation)\nORDER BY\n  time ASC\n\n  ",
              "refId": "B"
            },
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT \n      [time] = $__timeGroup(pc.[snapshot_time], $aggregation, previous)\n      ,metric = case when instance_name = 'system' then 'OS' else 'SQL Server' end\n      ,[value] = avg(pc.[cntr_value_calculated])\n  FROM [dbo].[sqlwatch_logger_perf_os_performance_counters] pc\n\t\tinner join [dbo].[sqlwatch_meta_performance_counter] mpc\n\t\t\ton pc.sql_instance = mpc.sql_instance\n\t\t\tand pc.performance_counter_id = mpc.performance_counter_id  \n  WHERE $__timeFilter(pc.snapshot_time)\n  AND mpc.counter_name IN ('Processor Time %')\n  and pc.instance_name IN ('sql','system')\n  AND pc.[sql_instance] = '$sql_instance'\n  GROUP BY $__timeGroup(pc.[snapshot_time], $aggregation) , case when instance_name = 'system' then 'OS' else 'SQL Server' end\nORDER BY\n  time ASC\n  \n  ",
              "refId": "1"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Processor Utilisation",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "seriesToColumns",
              "options": {
                "byField": "Time"
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {},
                "indexByName": {
                  "Time": 0,
                  "max": 3,
                  "min": 4,
                  "sql": 2,
                  "system": 1
                },
                "renameByName": {}
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:191",
              "decimals": 0,
              "format": "percent",
              "label": "",
              "logBase": 1,
              "max": "100",
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:192",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 3,
            "w": 24,
            "x": 0,
            "y": 47
          },
          "id": 192,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "# Captured Wait Events\r\nWait events longer than 1 second captured by extended events session.\r\n[See captured queries and transactions that have contributed to the wait](/d/sqlwatch-wait-events/wait-events?${__url_time_range}&var-DataSource=${DataSource}&var-sql_instance=${sql_instance})",
            "mode": "markdown"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 11,
            "w": 24,
            "x": 0,
            "y": 50
          },
          "id": 43,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "   \r\n\r\n## Activity  \r\n\r\n**Batch Requests/sec**: The number of batch requests received per second and is a good general indicator for the activity level of the SQL Server. This counter is highly dependent on the hardware and quality of code running on the server. The more powerful the hardware, the higher this number can be, even on poorly coded applications. A value of 1000 batch requests/sec is easily attainable, though a typical 100Mbs NIC can only handle about 3000 batch requests/sec. Many other counter thresholds depend upon batch requests/sec while, in some cases, a low (or high) number does not point to poor processing power. You should frequently use this counter in combination with other counters, such as processor utilization or user connections. In version 2000, \"Transactions/ sec\" was the counter most often used to measure overall activity, while versions 2005 and later use \"Batch Requests/sec\". Versions 2005 before SP2, measure this counter differently and may lead to some misunderstandings. Read the footnote for more details.\r\n\r\n**SQL Compilations/sec**: Number of times that Transact-SQL compilations occurred, per second (including recompiles). The lower this value is the better. High values often indicate excessive ad-hoc querying and should be as low as possible. If excessive ad-hoc querying is happening, try rewriting the queries as procedures or invoke the queries using sp_executeSQL. When rewriting isnt possible, consider using a plan guide or setting the database to parameterization forced mode.\r\n\r\n**SQL Re-Compilations/sec**: The number of times, per second, that Transact-SQL objects attempted to be executed but had to be recompiled before completion. This number should be at or near zero since recompiles can cause deadlocks and exclusive compile locks. This counters value should follow in proportion to \"Batch Requests/sec\" and \"SQL Compilations/ sec\". This needs to be nil in your system as much as possible.\r\n\r\n**Logins/sec**: *You want < 2* The number of user logins per second. Any value over 2 may indicate insufficient connection pooling.\r\n\r\nUser Connections: The number of users currently connected to the SQL Server. This counter should roughly track with \"Batch Requests/Sec\". They should generally rise and fall together. For example, blocking problems could be revealed by rising user connections, lock waits and lock wait time coupled with declining batch requests/sec.\r\n\r\n**Transactions/sec**: Number of transactions started for the database per second.",
            "mode": "markdown"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "unit": "short"
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 1,
          "gridPos": {
            "h": 7,
            "w": 24,
            "x": 0,
            "y": 61
          },
          "hiddenSeries": false,
          "id": 231,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "hideEmpty": false,
            "hideZero": false,
            "max": true,
            "min": true,
            "rightSide": false,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": false
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "select t.*\n\t  --rate calcs\n\t  ,[SQL Compilations Rate] = case when [Batch Requests/sec] > 0 then [SQL Compilations/sec] / [Batch Requests/sec] else 0 end\n\t  ,[SQL Re-Compilations Rate] = case when [SQL Compilations/sec] > 0 then [SQL Re-Compilations/sec]  / [SQL Compilations/sec] else 0 end\nfrom (\n  SELECT \n        [time] = $__timeGroup([snapshot_time], $aggregation) \n  \t\t  ,'SQL Compilations/sec' = AVG(case when counter_name = 'SQL Compilations/sec' then [cntr_value_calculated] else null end)\n  \t\t  ,'SQL Re-Compilations/sec' = AVG(case when counter_name = 'SQL Re-Compilations/sec' then [cntr_value_calculated] else null end)\n  \t\t  ,'Batch Requests/sec' = AVG(case when counter_name = 'Batch Requests/sec' then [cntr_value_calculated] else null end)\n  \t\t  ,'Logins/sec' = AVG(case when counter_name = 'Logins/sec' then [cntr_value_calculated] else null end)\n  \t\t  ,'Transactions/sec' = AVG(case when counter_name = 'Transactions/sec' then [cntr_value_calculated] else null end)\n  \t\t  ,'User Connections' = AVG(case when counter_name = 'User Connections' then [cntr_value_calculated] else null end)\n    FROM [dbo].[vw_sqlwatch_report_fact_perf_os_performance_counters]\n    WHERE [aggregation_interval_minutes] = 0\n    AND $__timeFilter(snapshot_time)\n    AND counter_name IN (\n  \t\t'SQL Compilations/sec'\n  \t\t,'SQL Re-Compilations/sec'\n  \t\t,'Batch Requests/sec'\n  \t\t,'Logins/sec'\n  \t\t,'Transactions/sec'\n  \t\t,'User Connections'\n  \t\t,'SQL Compilations/sec'\n  \t\t,'SQL Re-Compilations/sec')\n    AND [sql_instance] = '$sql_instance'\n    GROUP BY $__timeGroup([snapshot_time], $aggregation)\n  ) t\nORDER BY\n  time ASC\noption (keep plan)",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Activity",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "seriesToColumns",
              "options": {
                "byField": "Time"
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "SQL Compilations Rate": true,
                  "SQL Compilations/sec": false,
                  "SQL Re-Compilations Rate": true,
                  "SQL Re-Compilations/sec": false
                },
                "indexByName": {
                  "Batch Requests/sec": 1,
                  "Logins/sec": 2,
                  "SQL Compilations Rate": 7,
                  "SQL Compilations/sec": 5,
                  "SQL Re-Compilations Rate": 8,
                  "SQL Re-Compilations/sec": 6,
                  "Time": 0,
                  "Transactions/sec": 3,
                  "User Connections": 4
                },
                "renameByName": {}
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:1758",
              "format": "short",
              "label": "",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:1759",
              "format": "short",
              "logBase": 1,
              "show": false
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 5,
          "gridPos": {
            "h": 7,
            "w": 24,
            "x": 0,
            "y": 68
          },
          "hiddenSeries": false,
          "hideTimeOverride": false,
          "id": 65,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT \n      [time] = $__timeGroup([snapshot_time], $aggregation) \n      ,metric = [instance_name]\n      ,[value] = AVG([cntr_value_calculated])\n  FROM [dbo].[vw_sqlwatch_report_fact_perf_os_performance_counters]\n  WHERE [aggregation_interval_minutes] = 0\n  AND $__timeFilter(snapshot_time)\n  AND counter_name IN ('Transactions/sec')\n  AND instance_name IN ($database)\n  AND [sql_instance] = '$sql_instance'\n  GROUP BY [instance_name]\n      ,$__timeGroup([snapshot_time], $aggregation) \nORDER BY\n  time ASC\n  option (keep plan)\n  ",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Database Transactions /sec",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:1840",
              "decimals": 0,
              "format": "short",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:1841",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 75
          },
          "id": 109,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<br><br><h2 id=\"compilations\">SQL Compilations</h2>\r\n\r\n<p><b>SQL Compilations/sec</b>:  You want it to be < 10% (of the number of Batch Requests/Sec). Number of times that Transact-SQL compilations occurred, per second (including recompiles). The lower this value is the better. High values often indicate excessive ad-hoc querying and should be as low as possible. If excessive ad-hoc querying is happening, try rewriting the queries as procedures or invoke the queries using sp_executeSQL. When rewriting isnt possible, consider using a plan guide or setting the database to parameterization forced mode.</p>\r\n\r\n<p><b>SQL Re-Compilations/sec</b>: You want it to be < 10% (of the number of SQL Compilations/sec). The number of times, per second, that Transact-SQL objects attempted to be executed but had to be recompiled before completion. This number should be at or near zero since recompiles can cause deadlocks and exclusive compile locks. This counters value should follow in proportion to \"Batch Requests/sec\" and \"SQL Compilations/ sec\". This needs to be nil in your system as much as possible.</p>\r\n",
            "mode": "html"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 4,
          "gridPos": {
            "h": 7,
            "w": 24,
            "x": 0,
            "y": 81
          },
          "hiddenSeries": false,
          "id": 6,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:281",
              "alias": "SQL Compilation Rate",
              "color": "#5794F2"
            },
            {
              "$$hashKey": "object:282",
              "alias": "SQL Re-Compilation Rate",
              "color": "#FADE2A"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "datasource",
                "uid": "-- Dashboard --"
              },
              "panelId": 231,
              "refId": "A"
            }
          ],
          "thresholds": [
            {
              "$$hashKey": "object:1230",
              "colorMode": "warning",
              "fill": true,
              "line": false,
              "op": "gt",
              "value": 0.1,
              "yaxis": "left"
            },
            {
              "$$hashKey": "object:1231",
              "colorMode": "critical",
              "fill": true,
              "line": false,
              "op": "gt",
              "value": 0.2,
              "yaxis": "left"
            }
          ],
          "timeRegions": [],
          "title": "Compilation Rate",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "seriesToColumns",
              "options": {
                "byField": "Time"
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Batch Requests/sec": true,
                  "Logins/sec": true,
                  "SQL Compilations/sec": true,
                  "SQL Re-Compilations/sec": true,
                  "Transactions/sec": true,
                  "User Connections": true
                },
                "indexByName": {},
                "renameByName": {
                  "SQL Compilations Rate": "SQL Compilation Rate",
                  "SQL Re-Compilations Rate": "SQL Re-Compilation Rate"
                }
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:1202",
              "decimals": 0,
              "format": "percentunit",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:1203",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        }
      ],
      "targets": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "refId": "A"
        }
      ],
      "title": "$sql_instance: SQL Server Activity",
      "type": "row"
    },
    {
      "collapsed": true,
      "datasource": {
        "type": "mssql",
        "uid": "EeAYXKY4k"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 35
      },
      "id": 309,
      "panels": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 4,
            "w": 24,
            "x": 0,
            "y": 36
          },
          "id": 110,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "# Wait Times\r\n\r\nIf a particular resource is not available, SQL Server will have to wait before it can process the query. For example, if the storage is too slow, SQL Server will have to wait for the disk \"to deliver\" the data. Analogically, if the CPU is too busy, SQL Server will have to wait for it to become available.\r\nAll this means, that if SQL is waiting too much, our queries do not get executed straight away but are put in a queue which makes the system feel slow. This chart is critical in understanding what SQL Server is waiting on. The SQLSkills website is a great resource to learn about waits:\r\n[https://www.sqlskills.com/help/waits/](https://www.sqlskills.com/help/waits/). You can change how the wait types are grouped, either by Type or Category, using the filter on top or link in the chart.",
            "mode": "markdown"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": true,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": [
                {
                  "title": "Wait Events",
                  "url": "/d/sqlwatchwaits/wait-events?${__url_time_range}"
                }
              ]
            },
            "overrides": []
          },
          "fill": 5,
          "fillGradient": 4,
          "gridPos": {
            "h": 11,
            "w": 24,
            "x": 0,
            "y": 40
          },
          "hiddenSeries": false,
          "id": 232,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "sort": "total",
            "sortDesc": true,
            "total": true,
            "values": true
          },
          "lines": false,
          "linewidth": 1,
          "links": [
            {
              "title": "by Category",
              "url": "/d/sqlwatch-instance-overview/sql-instance-performance-overview?orgId=1&${__url_time_range}&${DataSource:queryparam}&${sql_instance:queryparam}&${aggregation:queryparam}&var-Waits=Category&${WaitCalc:queryparam}&${ShowChecksOK:queryparam}"
            },
            {
              "title": "by Type",
              "url": "/d/sqlwatch-instance-overview/sql-instance-performance-overview?orgId=1&${__url_time_range}&${DataSource:queryparam}&${sql_instance:queryparam}&${aggregation:queryparam}&var-Waits=Type&${WaitCalc:queryparam}&${ShowChecksOK:queryparam}"
            }
          ],
          "nullPointMode": "null as zero",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "alias": "Captured Wait Events",
              "bars": false,
              "color": "rgb(255, 255, 255)",
              "fillGradient": 5,
              "legend": false,
              "lines": false,
              "pointradius": 2,
              "points": true,
              "stack": false,
              "yaxis": 1
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT \n      [time] = $__timeGroup([snapshot_time], $aggregation) \n      ,metric = case when '$Waits' = 'Category' then [wait_category] else [wait_type] end\n      ,[value] = case when '$WaitCalc' = 'ms/sec' then avg([wait_time_ms_per_second]) else avg(wait_time_ms_delta) end\n  FROM [dbo].[vw_sqlwatch_report_fact_perf_os_wait_stats]\n  WHERE 1=1\n  AND $__timeFilter(snapshot_time)\n  AND [sql_instance] = '$sql_instance'\n  GROUP BY case when '$Waits' = 'Category' then [wait_category] else [wait_type] end\n      ,$__timeGroup([snapshot_time], $aggregation) \nORDER BY\n  time ASC\n  option (keep plan)\n  ",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Wait Time $WaitCalc by Wait $Waits",
          "tooltip": {
            "shared": false,
            "sort": 2,
            "value_type": "individual"
          },
          "transformations": [],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:2016",
              "decimals": 0,
              "format": "ms",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:2017",
              "format": "ms",
              "logBase": 1,
              "min": "0",
              "show": false
            }
          ],
          "yaxis": {
            "align": true
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "unit": "ms"
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 5,
            "w": 24,
            "x": 0,
            "y": 51
          },
          "hiddenSeries": false,
          "id": 191,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": false,
          "linewidth": 1,
          "links": [
            {
              "targetBlank": true,
              "title": "Details",
              "url": "/d/sqlwatch-wait-events/wait-events?${__url_time_range}&var-DataSource=${DataSource}&var-sql_instance=${sql_instance}"
            }
          ],
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 3,
          "points": true,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "rawSql": "SELECT \n      [time]= event_time\n      ,[Wait Type] = case when '$Waits' = 'Category' then [wait_category] else [wait_type] end\n      ,[Wait Duration] = sum([duration])\n  FROM [vw_sqlwatch_report_fact_xes_wait_events]\n    \n  WHERE $__timeFilter(event_time)\n  AND [sql_instance] = '$sql_instance'\n\n  group by event_time,case when '$Waits' = 'Category' then [wait_category] else [wait_type] end\nORDER BY\n  time ASC\n  option (keep plan)",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Wait Events",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:2096",
              "format": "ms",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:2097",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": {
            "uid": "$DataSource"
          },
          "fieldConfig": {
            "defaults": {
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto"
                },
                "filterable": false,
                "inspect": false
              },
              "links": [],
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "duration"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 96
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "wait_type"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 102
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "wait_category"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 124
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "database_name"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 155
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "session_id"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 116
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "signal_duration"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 147
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 5,
            "w": 24,
            "x": 0,
            "y": 56
          },
          "id": 194,
          "links": [
            {
              "targetBlank": true,
              "title": "Details",
              "url": "/d/sqlwatch-wait-events/wait-events?${__url_time_range}&var-DataSource=${DataSource}&var-sql_instance=${sql_instance}"
            }
          ],
          "options": {
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true,
            "sortBy": [
              {
                "desc": true,
                "displayName": "duration"
              }
            ]
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "table",
              "rawSql": "select \t event_time\t\n\t,wait_type\t\n\t,wait_category\t\n\t--,activity_id = convert(varchar(36),activity_id)\t\n\t--,activity_id_sequence\t\n\t,duration\t\n\t---,signal_duration\t\n\t,session_id\t\n\t,username\t\n\t,client_hostname\t\n\t,client_app_name\t\n\t,database_name\t\n\t--,sql_instance\t\n\t--,snapshot_time\t\n\t--,snapshot_type_id\n\t--,sqlwatch_query_hash = '--0x'+convert(varchar(max),sqlwatch_query_hash,2)\nfrom [dbo].[vw_sqlwatch_report_fact_xes_wait_events] \nWHERE [sql_instance] = '$sql_instance'\nAND $__timeFilter(event_time)",
              "refId": "A"
            }
          ],
          "title": "Queries",
          "transformations": [
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "RN": true,
                  "detail": true,
                  "sqlwatch_activity_id": false
                },
                "indexByName": {
                  "client_app_name": 6,
                  "client_hostname": 5,
                  "database_name": 4,
                  "duration": 3,
                  "event_time": 0,
                  "session_id": 8,
                  "username": 7,
                  "wait_category": 2,
                  "wait_type": 1
                },
                "renameByName": {}
              }
            }
          ],
          "transparent": true,
          "type": "table"
        }
      ],
      "targets": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "refId": "A"
        }
      ],
      "title": "$sql_instance: SQL Server Waits",
      "type": "row"
    },
    {
      "collapsed": true,
      "datasource": {
        "type": "mssql",
        "uid": "EeAYXKY4k"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 36
      },
      "id": 208,
      "panels": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 37
          },
          "id": 112,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<br><br><h2 id=\"scheduler\">Scheduler Tasks</h2>\r\n<p>SQL Server has its own, internal task mechanism controlled by the SQLOS. Every time we run a query, SQL Server will invoke one or more tasks to run this task, get data from tables etc. SQL Server has one scheduler per CPU thread. <a href=\"https://docs.microsoft.com/en-us/sql/relational-databases/system-dynamic-management-views/sys-dm-os-schedulers-transact-sql\">More details.</a><br>\r\n<b>Runnable Tasks:</b> You want 0. Number of workers, with tasks assigned to them, that are waiting to be scheduled on the runnable queue. If this number is high, it may indicate CPU pressure.<br>\r\n<b>Pending Disk IO:</b> You want 0. Number of pending I/Os that are waiting to be completed.<br>\r\n<b>Failed To Create Worker: </b> You want 0. Inability to create new work generally occurs because of memory constraints.<br>\r\n<b>Tasks Queue:</b> You want 0. Shows number of tasks awaiting a worker to pick them up.<br>\r\n<b>Current Tasks:</b> Number of tasks assigned to a scheduler. Task can be actively running or waiting.\r\n</p>",
            "mode": "html"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 1,
          "gridPos": {
            "h": 7,
            "w": 24,
            "x": 0,
            "y": 43
          },
          "hiddenSeries": false,
          "id": 12,
          "legend": {
            "alignAsTable": false,
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:122",
              "alias": "Runnable Tasks",
              "color": "#F2495C"
            },
            {
              "$$hashKey": "object:123",
              "alias": "Current Tasks",
              "color": "#73BF69"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT \n      [time] = $__timeGroup([snapshot_time], $aggregation, previous) \n      ,[Runnable Tasks] = AVG([runnable_tasks_count])\n      ,[Pending Disk IO] = AVG(pending_disk_io_count)\n      ,[Failed To Create Worker] = AVG(failed_to_create_worker)\n      ,[Tasks Queue] = AVG(work_queue_count)\n      ,[Current Tasks] = avg(current_tasks_count)\n  FROM [dbo].[vw_sqlwatch_report_fact_perf_os_schedulers]\n  WHERE 1 = 1\n  AND $__timeFilter(snapshot_time)\n  AND [sql_instance] = '$sql_instance'\n  GROUP BY $__timeGroup([snapshot_time], $aggregation, previous) \nORDER BY\n  time ASC\n  \n  ",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Scheduler Tasks",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "format": "short",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 1,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 50
          },
          "hiddenSeries": false,
          "id": 206,
          "legend": {
            "alignAsTable": false,
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:353",
              "alias": "Runnable Tasks",
              "color": "#F2495C"
            },
            {
              "$$hashKey": "object:354",
              "alias": "Current Tasks",
              "color": "#73BF69"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT time= $__timeGroup([snapshot_time], $aggregation, previous) \r\n      ,[max_workers]=MAX([max_workers])\r\n      ,[workers_created]=AVG([workers_created])\r\n      ,[idle_workers]=AVG([idle_workers])\r\n      ,[pending_tasks]=AVG([pending_tasks])\r\n  FROM [dbo].[sqlwatch_logger_xes_query_processing]\r\n   WHERE $__timeFilter(snapshot_time)\r\n  AND [sql_instance] = '$sql_instance'\r\n  GROUP BY $__timeGroup([snapshot_time], $aggregation, previous) \r\nORDER BY\r\n  time ASC",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Query Processing",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "short",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 56
          },
          "id": 108,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<p>\r\n<b>Auto-Param Attempts/sec</b> Number of auto-parameterization attempts per second. Total should be the sum of the failed, safe, and unsafe auto-parameterizations. Auto-parameterization occurs when an instance of SQL Server tries to parameterize a Transact-SQL request by replacing some literals with parameters so that reuse of the resulting cached execution plan across multiple similar-looking requests is possible. Note that auto-parameterizations are also known as simple parameterizations in newer versions of SQL Server. This counter does not include forced parameterizations.\r\n<br>\r\n<b>Failed Auto-Params/sec</b> \tNumber of failed auto-parameterization attempts per second. This should be small. Note that auto-parameterizations are also known as simple parameterizations in later versions of SQL Server.\r\n<br>\r\n<b>Forced Parameterizations/sec</b> Number of successful forced parameterizations per second.\r\n<br>\r\n<b>Safe Auto-Params/sec</b> Number of safe auto-parameterization attempts per second. Safe refers to a determination that a cached execution plan can be shared between different similar-looking Transact-SQL statements. SQL Server makes many auto-parameterization attempts some of which turn out to be safe and others fail. Note that auto-parameterizations are also known as simple parameterizations in later versions of SQL Server. This does not include forced parameterizations.\r\n<br>\r\n<b>Unsafe Auto-Params/sec</b> Number of unsafe auto-parameterization attempts per second. For example, the query has some characteristics that prevent the cached plan from being shared. These are designated as unsafe. This does not count the number of forced parameterizations.\r\n</p>",
            "mode": "html"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "unit": "short"
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 1,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 62
          },
          "hiddenSeries": false,
          "id": 209,
          "legend": {
            "alignAsTable": false,
            "avg": true,
            "current": true,
            "hideEmpty": false,
            "hideZero": false,
            "max": true,
            "min": true,
            "rightSide": false,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": false
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT \n      [time] = $__timeGroup([snapshot_time], $aggregation) \n      ,'Auto-Param Attempts/sec' = avg(case when [counter_name] = 'Auto-Param Attempts/sec' then [cntr_value_calculated] else null end)\n      ,'Failed Auto-Params/sec' = avg(case when [counter_name] = 'Failed Auto-Params/sec' then [cntr_value_calculated] else null end)\n      ,'Forced Parameterizations/sec' = avg(case when [counter_name] = 'Forced Parameterizations/sec' then [cntr_value_calculated] else null end)\n      ,'Safe Auto-Params/sec' = avg(case when [counter_name] = 'Safe Auto-Params/sec' then [cntr_value_calculated] else null end)\n      ,'Unsafe Auto-Params/sec' = avg(case when [counter_name] = 'Unsafe Auto-Params/sec' then [cntr_value_calculated] else null end)\n      ,'Errors/sec' = avg(case when [counter_name] = 'Errors/sec' and [instance_name] not in ('User Errors','Info Errors','_Total') then [cntr_value_calculated] else null end)\n  FROM [dbo].[vw_sqlwatch_report_fact_perf_os_performance_counters]\n  WHERE [aggregation_interval_minutes] = 0\n  AND $__timeFilter(snapshot_time)\n  AND counter_name IN ('Auto-Param Attempts/sec','Failed Auto-Params/sec','Forced Parameterizations/sec','Safe Auto-Params/sec','Unsafe Auto-Params/sec'\n    ,'Errors/sec')\n  AND [sql_instance] = '$sql_instance'\n  GROUP BY $__timeGroup([snapshot_time], $aggregation)\nORDER BY\n  time ASC",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Parametrization",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Time",
                    "Auto-Param Attempts/sec",
                    "Failed Auto-Params/sec",
                    "Forced Parameterizations/sec",
                    "Safe Auto-Params/sec",
                    "Unsafe Auto-Params/sec"
                  ]
                }
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "short",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": false
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 4,
            "w": 24,
            "x": 0,
            "y": 68
          },
          "id": 210,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<br><br><h2 id=\"long\">Long Queries</h2>\r\n<p>Long running queries are usually caused by poor queries, trying to process too much data at a time clogging CPU, Memory and oversaturating storage. However, some long running processes are OK, for example sleeping tasks or background processes that do not eaty too much resources.\r\nIf you have a long running query that you are OK with, you can exclude it from collection in <span style=\"font-family:monospace;font-size:12px;background:#3D3D3D;padding:2px 4px 2px 4px;border-radius:2px;\">[dbo].[sqlwatch_config_exclude_xes_long_query]</span></p>\r\n",
            "mode": "html"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "${DataSource}"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "unit": "short"
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 1,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 72
          },
          "hiddenSeries": false,
          "id": 87,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": false,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 3,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:489",
              "alias": "Long Sessions",
              "color": "#F2495C"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "${DataSource}"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT [time] = h.snapshot_time\r\n      , [Long Sessions]=count(distinct [session_id])\r\n \r\n  FROM [dbo].[sqlwatch_logger_snapshot_header] h --this is so we always get row to show the tile, even if there are no rows in the data view. otherwise the tile will not be shown\r\n  left join [dbo].[vw_sqlwatch_report_fact_xes_long_queries] l\r\n    on h.sql_instance = l.sql_instance\r\n    and h.snapshot_time = l.snapshot_time\r\n    and h.snapshot_type_id = l.snapshot_type_id\r\n  where h.[sql_instance] = '$sql_instance'\r\n   AND $__timeFilter(h.snapshot_time)\r\n   group by h.snapshot_time\r\nORDER BY\r\n  time desc",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Long Processes",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:118",
              "decimals": 0,
              "format": "short",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:119",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 4,
            "w": 24,
            "x": 0,
            "y": 78
          },
          "id": 111,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<br><br><h2 id=\"errors\">Errors</h2>\r\n<p>Errors reported by SQL engine, excludes \"User Errors\" and \"Info Errors\". These will likely be relatively serious, such a broken connections, kill connections, database offline errors.</p>",
            "mode": "html"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "description": "",
          "fill": 1,
          "fillGradient": 1,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 82
          },
          "hiddenSeries": false,
          "id": 9,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": true,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:557",
              "alias": "Errors/sec",
              "color": "#F2495C"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "datasource",
                "uid": "-- Dashboard --"
              },
              "panelId": 209,
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Errors/sec",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Time",
                    "Errors/sec"
                  ]
                }
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "short",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        }
      ],
      "targets": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "refId": "A"
        }
      ],
      "title": "$sql_instance: SQL Server Query Processing",
      "type": "row"
    },
    {
      "collapsed": true,
      "datasource": {
        "type": "mssql",
        "uid": "EeAYXKY4k"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 37
      },
      "id": 185,
      "panels": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "description": "",
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 38
          },
          "id": 29,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<br><h1 id=\"locking\">SQL Server Locking</h1>\r\n<p>Locking mechanism is critical part of every relational database. Every time a row is read, inserted or modified SQL Server applies appropriate locks to ensure no one else can access the data whilst it's being read of modified. The locking mechanism ensures data consistency however, excessive locking can lead overal poor performance and even create blocking chains.</p>\r\n<br>\r\n<p><b>Lock Requests / sec</b>: *You want <1000*.  The number of new locks and locks converted per second. This metrics value should generally correspond to \"Batch Requests/sec\". Values > 1000 may indicate queries are accessing very large numbers of rows and may benefit from tuning.\r\n</p>",
            "mode": "html"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fill": 1,
          "fillGradient": 1,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 44
          },
          "hiddenSeries": false,
          "id": 79,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:1051",
              "alias": "Lock Requests/sec",
              "color": "#F2495C"
            },
            {
              "$$hashKey": "object:1052",
              "alias": "Batch Requests/sec",
              "color": "rgba(87, 148, 242, 0.35)",
              "fill": 1,
              "fillGradient": 5,
              "yaxis": 2
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT \n      [time] = $__timeGroup([snapshot_time], $aggregation) \n      ,'Lock Requests/sec' = avg(case when [counter_name] = 'Lock Requests/sec' then [cntr_value_calculated] else null end)\n      ,'Batch Requests/sec' = avg(case when [counter_name] = 'Batch Requests/sec' then [cntr_value_calculated] else null end)\n      ,'Lock Timeouts/sec' = avg(case when [counter_name] = 'Lock Timeouts/sec' then [cntr_value_calculated] else null end)\n      ,'Lock Waits/sec' = avg(case when [counter_name] = 'Lock Waits/sec' then [cntr_value_calculated] else null end)\n      ,'Average Wait Time (ms)' = avg(case when [counter_name] = 'Average Wait Time (ms)' then [cntr_value_calculated] else null end)\n      ,'Processes blocked' = sum(case when [counter_name] = 'Processes blocked' then [cntr_value_calculated] else null end)\n  FROM [dbo].[vw_sqlwatch_report_fact_perf_os_performance_counters]\n  WHERE [aggregation_interval_minutes] = 0\n  AND $__timeFilter(snapshot_time)\n  AND counter_name IN ('Lock Requests/sec','Batch Requests/sec','Lock Timeouts/sec','Lock Waits/sec','Average Wait Time (ms)','Processes blocked')\n  AND [sql_instance] = '$sql_instance'\n  GROUP BY $__timeGroup([snapshot_time], $aggregation) \nORDER BY\n  time ASC\n  \n  ",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Lock Requests/sec",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Time",
                    "Lock Requests/sec",
                    "Batch Requests/sec"
                  ]
                }
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "short",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 2,
            "w": 24,
            "x": 0,
            "y": 50
          },
          "id": 83,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<br><p><b>Lock Timeouts/ sec</b>: *You want <1*.  Shows the number of lock requests per second that timed out, including internal requests for NOWAIT locks. A value greater than zero might indicate that user queries are not completing. The lower this value is, the better.</p>",
            "mode": "html"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 1,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 52
          },
          "hiddenSeries": false,
          "id": 82,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:1132",
              "alias": "Lock Timeouts/sec",
              "color": "#F2495C"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "datasource",
                "uid": "-- Dashboard --"
              },
              "panelId": 79,
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Lock Timeouts/sec",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Time",
                    "Lock Timeouts/sec"
                  ]
                }
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "short",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 3,
            "w": 24,
            "x": 0,
            "y": 58
          },
          "id": 86,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<br>\r\n<p><b>Lock Waits/sec</b>: *You want 0*.  How many times users waited to acquire a lock over the past second. Values greater than zero indicate at least some blocking is occurring, while a value of zero can quickly eliminate blocking as a potential root-cause problem. As with \"Lock Wait Time\", lock waits are not recorded by PerfMon until after the lock event completes.</p>",
            "mode": "html"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 1,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 61
          },
          "hiddenSeries": false,
          "id": 85,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:1497",
              "alias": "Lock Waits/sec",
              "color": "#F2495C"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "datasource",
                "uid": "-- Dashboard --"
              },
              "panelId": 79,
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Lock Waits/sec",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Time",
                    "Lock Waits/sec"
                  ]
                }
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "short",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 3,
            "w": 24,
            "x": 0,
            "y": 67
          },
          "id": 150,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<br>\r\n<p>\r\n<b>Avg Wait Time (ms)</b>: *You want <500 *   \r\nThe average wait time, in milliseconds, for each lock request that had to wait. Average wait time longer than 500ms may indicate excessive blocking. This value should generally correlate to \"Lock Waits/sec\" and move up or down with it accordingly.</p>",
            "mode": "html"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 70
          },
          "hiddenSeries": false,
          "id": 149,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:1712",
              "alias": "Average Wait Time (ms)",
              "color": "#F2495C"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "datasource",
                "uid": "-- Dashboard --"
              },
              "panelId": 79,
              "refId": "A"
            }
          ],
          "thresholds": [
            {
              "colorMode": "critical",
              "fill": true,
              "line": false,
              "op": "gt",
              "value": 500,
              "yaxis": "left"
            }
          ],
          "timeRegions": [],
          "title": "Average Wait Time",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Time",
                    "Average Wait Time (ms)"
                  ]
                }
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "ms",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 3,
            "w": 24,
            "x": 0,
            "y": 76
          },
          "id": 113,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<br>\r\n<p><b>Blocking chains</b> Excessive locking can cause blocking chains. Blocking chains happen when two or more queries are trying to access data that is being locked by the first query. In such case, none of the queries can complete until the first query completes first. Blocking chains often indicate bad indexes, excessive scanning, lock escanation and overall bad application design.</p>",
            "mode": "html"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "description": "",
          "fill": 1,
          "fillGradient": 5,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 79
          },
          "hiddenSeries": false,
          "id": 13,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:1927",
              "alias": "Processes blocked",
              "color": "#F2495C"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "datasource",
                "uid": "-- Dashboard --"
              },
              "panelId": 79,
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Blocked Processes",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Time",
                    "Processes blocked"
                  ]
                }
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "short",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        }
      ],
      "targets": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "refId": "A"
        }
      ],
      "title": "$sql_instance: SQL Server Locking",
      "type": "row"
    },
    {
      "collapsed": true,
      "datasource": {
        "type": "mssql",
        "uid": "EeAYXKY4k"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 38
      },
      "id": 183,
      "panels": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 3,
            "w": 24,
            "x": 0,
            "y": 39
          },
          "id": 77,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<br><h1 id=\"memory\">SQL Server Memory</h2>\r\n<p>The memory section shows the internals of SQL Server memory and its pressure points.</p>",
            "mode": "html"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 1,
          "gridPos": {
            "h": 7,
            "w": 24,
            "x": 0,
            "y": 42
          },
          "hiddenSeries": false,
          "id": 104,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2809",
              "alias": "Physical Memory in use",
              "color": "#F2495C",
              "fillGradient": 8
            },
            {
              "$$hashKey": "object:2810",
              "alias": "Available Commit limit",
              "color": "#73BF69"
            },
            {
              "$$hashKey": "object:2811",
              "alias": "Physical Memory Low Indicator",
              "bars": true,
              "yaxis": 2
            },
            {
              "$$hashKey": "object:2812",
              "alias": "Virtual Memory Low Indicator",
              "bars": true,
              "yaxis": 2
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT \n      [time] = $__timeGroup([snapshot_time], $aggregation) \n      ,[Physical Memory in use] = AVG([physical_memory_in_use_kb])\n      ,[Available Commit limit] = AVG(available_commit_limit_kb)\n      ,[Physical Memory Low Indicator] = MAX(convert(int,process_physical_memory_low))\n      ,[Virtual Memory Low Indicator] = MAX(convert(int,process_virtual_memory_low))\n  FROM [dbo].[vw_sqlwatch_report_fact_perf_os_process_memory]\n  WHERE 1 = 1\n  AND $__timeFilter(snapshot_time)\n  AND [sql_instance] = '$sql_instance'\n  GROUP BY $__timeGroup([snapshot_time], $aggregation) \nORDER BY\n  time ASC\n  \n  ",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Physical memory",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "deckbytes",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "decimals": 0,
              "format": "short",
              "logBase": 1,
              "max": "1",
              "min": "0",
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "mssql",
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 1,
          "gridPos": {
            "h": 7,
            "w": 24,
            "x": 0,
            "y": 49
          },
          "hiddenSeries": false,
          "id": 34,
          "legend": {
            "alignAsTable": false,
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "editorMode": "code",
              "format": "time_series",
              "hide": false,
              "rawQuery": true,
              "rawSql": "SELECT \n      [time] = $__timeGroup([snapshot_time], $aggregation) \n      --this chart\n      ,'Connection Memory (KB)' = avg(case when counter_name = 'Connection Memory (KB)' then [cntr_value_calculated] else null end)\n      ,'Optimizer Memory (KB)' = avg(case when counter_name = 'Optimizer Memory (KB)' then [cntr_value_calculated] else null end)\n      ,'SQL Cache Memory (KB)' = avg(case when counter_name = 'SQL Cache Memory (KB)' then [cntr_value_calculated] else null end)\n      --other charts\n      ,'Total Server Memory (KB)' = avg(case when counter_name = 'Total Server Memory (KB)' then [cntr_value_calculated] else null end)\n      ,'Stolen Server Memory (KB)' = avg(case when counter_name = 'Stolen Server Memory (KB)' then [cntr_value_calculated] else null end)\n      ,'Target Server Memory (KB)' = avg(case when counter_name = 'Target Server Memory (KB)' then [cntr_value_calculated] else null end)\n      --\n      ,'Memory Grants Outstanding' = avg(case when counter_name = 'Memory Grants Outstanding' then [cntr_value_calculated] else null end)\n      ,'Memory Grants Pending' = avg(case when counter_name = 'Memory Grants Pending' then [cntr_value_calculated] else null end)\n      --\n      ,'Free list stalls/sec' = avg(case when counter_name = 'Free list stalls/sec' then [cntr_value_calculated] else null end)\n      --\n      ,'Page Lookups/sec' = avg(case when counter_name = 'Page Lookups/sec' then [cntr_value_calculated] else null end)\n      ,'Batch Requests/sec' = avg(case when counter_name = 'Batch Requests/sec' then [cntr_value_calculated] else null end)\n      --\n      ,'Page reads/sec' = avg(case when counter_name = 'Page reads/sec' then [cntr_value_calculated] else null end)\n      ,'Page writes/sec' = avg(case when counter_name = 'Page writes/sec' then [cntr_value_calculated] else null end)\n      --\n      ,'Readahead pages/sec' = avg(case when counter_name = 'Readahead pages/sec' then [cntr_value_calculated] else null end)\n      --\n      ,'Checkpoint pages/sec' = avg(case when counter_name = 'Checkpoint pages/sec' then [cntr_value_calculated] else null end)\n      --\n      ,'Lazy writes/sec' = avg(case when counter_name = 'Lazy writes/sec' then [cntr_value_calculated] else null end)\n      --\n      ,'Page life Expectancy'  = avg(case when counter_name = 'Page life Expectancy' then [cntr_value_calculated] else null end)\n      --\n      ,'Buffer cache hit ratio'  = avg(case when counter_name = 'Buffer cache hit ratio' then [cntr_value_calculated] else null end)\n  FROM [dbo].[vw_sqlwatch_report_fact_perf_os_performance_counters]\n  WHERE [aggregation_interval_minutes] = 0\n  AND $__timeFilter(snapshot_time)\n  AND counter_name IN ('Connection Memory (KB)','Optimizer Memory (KB)','SQL Cache Memory (KB)'\n                      ,'Total Server Memory (KB)','Stolen Server Memory (KB)', 'Target Server Memory (KB)'\n                      ,'Memory Grants Outstanding','Memory Grants Pending'\n                      ,'Free list stalls/sec'\n                      ,'Page Lookups/sec','Batch Requests/sec'\n                      ,'Page reads/sec','Page writes/sec'\n                      ,'Readahead pages/sec','Page reads/sec'\n                      ,'Checkpoint pages/sec'\n                      ,'Lazy writes/sec'\n                      ,'Page life Expectancy'\n                      ,'Buffer cache hit ratio'\n                      )\n  AND [sql_instance] = '$sql_instance'\n  GROUP BY $__timeGroup([snapshot_time], $aggregation) \nORDER BY\n  time ASC\n  \n  ",
              "refId": "A",
              "sql": {
                "columns": [
                  {
                    "parameters": [],
                    "type": "function"
                  }
                ],
                "groupBy": [
                  {
                    "property": {
                      "type": "string"
                    },
                    "type": "groupBy"
                  }
                ],
                "limit": 50
              }
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "SQL Memory Breakdown",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Time",
                    "Connection Memory (KB)",
                    "Optimizer Memory (KB)",
                    "SQL Cache Memory (KB)"
                  ]
                }
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "deckbytes",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 1,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 56
          },
          "hiddenSeries": false,
          "id": 8,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "datasource",
                "uid": "-- Dashboard --"
              },
              "panelId": 34,
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Process Memory",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Time",
                    "Total Server Memory (KB)",
                    "Stolen Server Memory (KB)",
                    "Target Server Memory (KB)"
                  ]
                }
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "deckbytes",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": true,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 9,
            "w": 24,
            "x": 0,
            "y": 62
          },
          "hiddenSeries": false,
          "id": 40,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "sort": "avg",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": false,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT \n      [time] = $__timeGroup([snapshot_time], $aggregation) \n      ,metric = [clerk_name]\n      ,[value] = sum([allocated_kb])\n  FROM [dbo].[vw_sqlwatch_report_fact_perf_os_memory_clerks]\n  WHERE 1 = 1\n  AND $__timeFilter(snapshot_time)\n  AND [sql_instance] = '$sql_instance'\n  GROUP BY [clerk_name]\n      ,$__timeGroup([snapshot_time], $aggregation) \nORDER BY\n  time ASC\n  \n  ",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Memory Clerks",
          "tooltip": {
            "shared": false,
            "sort": 0,
            "value_type": "individual"
          },
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "deckbytes",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 3,
            "w": 24,
            "x": 0,
            "y": 71
          },
          "id": 55,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<br>\r\n<p><b>Memory Grants Outstanding</b>: The total number of processes per second that have successfully acquired a workspace memory grant.<br>\r\n<b>Memory Grants Pending </b>: *You want 0*  The total number of processes per second waiting for a workspace memory grant. Numbers higher than 0 indicate a lack of memory.</p>",
            "mode": "html"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 74
          },
          "hiddenSeries": false,
          "id": 38,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2962",
              "alias": "Memory Grants Pending",
              "color": "#F2495C"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "datasource",
                "uid": "-- Dashboard --"
              },
              "panelId": 34,
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Memory Grants",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Time",
                    "Memory Grants Outstanding",
                    "Memory Grants Pending"
                  ]
                }
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "short",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 2,
            "w": 24,
            "x": 0,
            "y": 80
          },
          "id": 138,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<br>\r\n<p>\r\n<b>Free List Stalls/sec</b>: *You want < 2*. Monitors the number of requests per second where data requests stall because no buffers are available. Any value above 2 means SQL Server needs more memory.\r\n</p>",
            "mode": "html"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 82
          },
          "hiddenSeries": false,
          "id": 137,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": true,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "datasource",
                "uid": "-- Dashboard --"
              },
              "panelId": 34,
              "refId": "A"
            }
          ],
          "thresholds": [
            {
              "colorMode": "critical",
              "fill": true,
              "line": false,
              "op": "gt",
              "value": 2,
              "yaxis": "left"
            }
          ],
          "timeRegions": [],
          "title": "Free list stalls/sec",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Time",
                    "Free list stalls/sec"
                  ]
                }
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "short",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 2,
            "w": 24,
            "x": 0,
            "y": 88
          },
          "id": 56,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<br>\r\n<p><b>Page lookups Rate</b>: *You want < 100*  The ratio of *Page lookups/ sec* and *Batch Requests/ sec*. The number of requests to find a page in the buffer pool. When the ratio of batch requests to page lookups crests 100, you may have inefficient execution plans or too many adhoc queries.</p>",
            "mode": "html"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 1,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 90
          },
          "hiddenSeries": false,
          "id": 21,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:3530",
              "alias": "Page lookups rate",
              "color": "#F2495C"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "datasource",
                "uid": "-- Dashboard --"
              },
              "panelId": 34,
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Page Lookup Rate",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "calculateField",
              "options": {
                "alias": "Page Lookup Rate",
                "binary": {
                  "left": "Page Lookups/sec",
                  "operator": "/",
                  "reducer": "sum",
                  "right": "Batch Requests/sec"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                },
                "replaceFields": true
              }
            },
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Time",
                    "Page Lookup Rate"
                  ]
                }
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "percent",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 4,
            "w": 24,
            "x": 0,
            "y": 96
          },
          "id": 156,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<br>\r\n<p>\r\n<b>\r\nPage Reads/sec\r\n</b>:   *You want < 90* The number of physical database page reads issued per second. Normal OLTP workloads support 80  90 per second, but higher values may be a yellow flag for poor indexing or insufficient memory.\r\n</p>\r\n\r\n\r\n<p>\r\n<b>Page Writes/sec</b>: *You want < 90* The number of database pages physically written to disk per second. Normal OLTP workloads support 80  90 per second. Values over 90 should be crossed checked with \"lazy writer/sec\" and \"checkpoint\" counters. If the other counters are also high, then it may indicate insufficient memory.\r\n</p>",
            "mode": "html"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 100
          },
          "hiddenSeries": false,
          "id": 155,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "datasource",
                "uid": "-- Dashboard --"
              },
              "panelId": 34,
              "refId": "A"
            }
          ],
          "thresholds": [
            {
              "colorMode": "critical",
              "fill": true,
              "line": false,
              "op": "gt",
              "value": 90,
              "yaxis": "left"
            }
          ],
          "timeRegions": [],
          "title": "Page reads/sec vs Page writes/sec",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Time",
                    "Page reads/sec",
                    "Page writes/sec"
                  ]
                }
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "format": "short",
              "label": "",
              "logBase": 1,
              "show": true
            },
            {
              "decimals": 0,
              "format": "short",
              "logBase": 1,
              "min": "0",
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 2,
            "w": 24,
            "x": 0,
            "y": 106
          },
          "id": 146,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<br>\r\n<p>\r\n<b>Readahead/sec</b>:  *You want < 20% of Page Reads/ sec*   \r\nThe number of data pages read per second in anticipation of their use. If this value is made up even a sizeable minority of total Page Reads/sec (say, greater than 20% of total page reads), you may have too many physical reads occurring.\r\n</p>",
            "mode": "html"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "Readahead rate"
                },
                "properties": [
                  {
                    "id": "unit",
                    "value": "percentunit"
                  }
                ]
              }
            ]
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 108
          },
          "hiddenSeries": false,
          "id": 145,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:4413",
              "alias": "Readahead rate",
              "color": "#F2495C",
              "fillGradient": 1,
              "nullPointMode": "null as zero",
              "yaxis": 2
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "datasource",
                "uid": "-- Dashboard --"
              },
              "panelId": 34,
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Readahead pages/sec",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "calculateField",
              "options": {
                "alias": "Readahead rate",
                "binary": {
                  "left": "Readahead pages/sec",
                  "operator": "/",
                  "reducer": "sum",
                  "right": "Page reads/sec"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Time",
                    "Readahead pages/sec",
                    "Readahead rate"
                  ]
                }
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "none",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "decimals": 0,
              "format": "percentunit",
              "logBase": 1,
              "min": "0",
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 2,
            "w": 24,
            "x": 0,
            "y": 114
          },
          "id": 114,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "**Checkpoint Pages/ sec**: Monitors the number of dirty pages, per second, that are flushed to disk when SQL Server invokes the checkpoint process. Checkpoint frequency is influenced by the recovery interval setting in sp_configure. High values for this counter may indicate insufficient memory or that the recovery interval is too high.",
            "mode": "markdown"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 116
          },
          "hiddenSeries": false,
          "id": 204,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "datasource",
                "uid": "-- Dashboard --"
              },
              "panelId": 34,
              "refId": "A"
            }
          ],
          "thresholds": [
            {
              "colorMode": "warning",
              "fill": true,
              "line": false,
              "op": "gt",
              "value": 20,
              "yaxis": "left"
            }
          ],
          "timeRegions": [],
          "title": "Checkpoint pages/sec",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Time",
                    "Checkpoint pages/sec"
                  ]
                }
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "format": "short",
              "label": "",
              "logBase": 1,
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 2,
            "w": 24,
            "x": 0,
            "y": 122
          },
          "id": 205,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<br>\r\n<p><b>Lazy Writes/Sec</b>: *You want< 20*   \r\nMonitors the number of times per second that the Lazy Writer process moves dirty pages from the buffer to disk as it frees up buffer space. Lower is better with zero being ideal. When greater than 20, this counter indicates a need for more memory.</p>",
            "mode": "html"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 124
          },
          "hiddenSeries": false,
          "id": 42,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:4691",
              "alias": "Lazy writes/sec",
              "color": "#F2495C"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "datasource",
                "uid": "-- Dashboard --"
              },
              "panelId": 34,
              "refId": "A"
            }
          ],
          "thresholds": [
            {
              "colorMode": "warning",
              "fill": true,
              "line": false,
              "op": "gt",
              "value": 20,
              "yaxis": "left"
            }
          ],
          "timeRegions": [],
          "title": "Lazy writes/sec",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Time",
                    "Lazy writes/sec"
                  ]
                }
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "short",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 3,
            "w": 24,
            "x": 0,
            "y": 130
          },
          "id": 115,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<br>\r\n<p><b>Page Life Expectancy</b> Tells, on average, how many seconds SQL Server expects a data page to stay in cache. The target on an OLTP system should be at least 300 (5 min). When under 300, this may indicate poor index design (leading to increased disk I/O and less effective use of memory) or, simply, a potential shortage of memory. </p>",
            "mode": "html"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "unit": "s"
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 1,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 133
          },
          "hiddenSeries": false,
          "id": 19,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "datasource",
                "uid": "-- Dashboard --"
              },
              "panelId": 34,
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Avg page life expentancy",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Time",
                    "Page life Expectancy"
                  ]
                }
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 1,
              "format": "s",
              "logBase": 1,
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 3,
            "w": 24,
            "x": 0,
            "y": 139
          },
          "id": 116,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<br>\r\n<p><b>Buffer Cache Hit Ratio</b> Long a stalwart counter used by SQL Server DBAs, this counter is no longer very useful. It monitors the percentage of data requests answer from the buffer cache since the last reboot. However, other counters are much better for showing current memory pressure that this one because it blows the curve. For example, PLE (page life expectancy) might suddenly drop from 2000 to 70, while buffer cache hit ration moves only from 98.2 to 98.1. Only be concerned by this counter if its value is regularly below 90 (for OLTP) or 80 (for very large OLAP).\r\n</p>",
            "mode": "html"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "unit": "%"
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 1,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 142
          },
          "hiddenSeries": false,
          "id": 103,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "datasource",
                "uid": "-- Dashboard --"
              },
              "panelId": 34,
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Buffer cache hit ratio",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Time",
                    "Buffer cache hit ratio"
                  ]
                }
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "%",
              "logBase": 1,
              "max": "100",
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        }
      ],
      "targets": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "refId": "A"
        }
      ],
      "title": "$sql_instance: SQL Server Memory",
      "type": "row"
    },
    {
      "collapsed": true,
      "datasource": {
        "type": "mssql",
        "uid": "EeAYXKY4k"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 39
      },
      "id": 181,
      "panels": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 4,
            "w": 24,
            "x": 0,
            "y": 40
          },
          "id": 31,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<br><h1 id=\"tempdb\">TempDB</h1>\r\n<p>TempDB is a temporary, and very important database in SQL Server. We, users, can use it by creating temporary tables #table or ##table or even physical tables dbo.table. The tempdb is recreated every time SQL Server starts so we must not be storing anything of value there.\r\nSQL Server heavily relies on tempodb for its query execution - sometime it will use tempdb for sorting data or to \"spill\" data if it runs out of memory or if the query is not optimised. So, when we say \"my query does not use tempdb\" this may not be true.</p>",
            "mode": "html"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 44
          },
          "hiddenSeries": false,
          "id": 72,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT \n      [time] = $__timeGroup([snapshot_time], $aggregation) \n      ,'Active Temp Tables' = avg(case when counter_name = 'Active Temp Tables' then cntr_value_calculated else null end)\n      ,'Temp Tables Creation Rate' = avg(case when counter_name = 'Temp Tables Creation Rate' then cntr_value_calculated else null end)\n      ,'Free Space in tempdb (KB)' = avg(case when counter_name = 'Free Space in tempdb (KB)' then cntr_value_calculated else null end)\n  FROM [dbo].[vw_sqlwatch_report_fact_perf_os_performance_counters]\n  WHERE [aggregation_interval_minutes] = 0\n  AND $__timeFilter(snapshot_time)\n  AND counter_name IN ('Active Temp Tables','Temp Tables Creation Rate','Free Space in tempdb (KB)')\n  AND [sql_instance] = '$sql_instance'\n  GROUP BY $__timeGroup([snapshot_time], $aggregation) \nORDER BY\n  time ASC\n  \n  ",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Active Temp Tables",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Time",
                    "Active Temp Tables"
                  ]
                }
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "short",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 50
          },
          "hiddenSeries": false,
          "id": 202,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "datasource",
                "uid": "-- Dashboard --"
              },
              "panelId": 72,
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Temp Tables Creation Rate",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Time",
                    "Temp Tables Creation Rate"
                  ]
                }
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "short",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 56
          },
          "hiddenSeries": false,
          "id": 74,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "datasource",
                "uid": "-- Dashboard --"
              },
              "panelId": 72,
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Free space in tempdb",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Time",
                    "Free Space in tempdb (KB)"
                  ]
                }
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "deckbytes",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        }
      ],
      "targets": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "refId": "A"
        }
      ],
      "title": "$sql_instance: SQL Server TempDB",
      "type": "row"
    },
    {
      "collapsed": true,
      "datasource": {
        "type": "mssql",
        "uid": "EeAYXKY4k"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 40
      },
      "id": 179,
      "panels": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 5,
            "w": 24,
            "x": 0,
            "y": 41
          },
          "id": 70,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<br><h1 id=\"storage\">SQL Server Storage</h1>\r\n<p>SQL Server is very fast at handling large volumes of data per CPU core. However, that data has to come from the storage so it is critical that the storage is able to deliver the desired throughput.<br>\r\nYou will want to make sure that the storage interfaces are not saturated and if they are, you will have to look at either upgrading or performance tunning your storage devices. Or, tune your queries to pull less data.</p>\r\n<p>This section shows what SQL Server does with the storage, how much data its reading or writing, how it uses indexes etc...</p>",
            "mode": "html"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": [],
              "unit": "decbytes"
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 1,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 46
          },
          "hiddenSeries": false,
          "id": 14,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2473",
              "alias": "Bytes Written",
              "color": "#F2495C"
            },
            {
              "$$hashKey": "object:2474",
              "alias": "Bytes Read",
              "color": "#FADE2A"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT \n        [time] = $__timeGroup([snapshot_time], $aggregation) \n      , [Bytes Written] = SUM([num_of_bytes_written_delta])\n      , [Bytes Read] = SUM([num_of_bytes_read_delta])\n      , [Bytes Written/sec] = AVG([bytes_written_per_second])\n      , [Bytes Read/sec] = AVG([bytes_read_per_second])\n  FROM [dbo].[vw_sqlwatch_report_fact_perf_file_stats]\n  WHERE 1 = 1\n  AND $__timeFilter(snapshot_time)\n  AND [sql_instance] = '$sql_instance'\n  AND database_name IN ($database)\n  GROUP BY $__timeGroup([snapshot_time], $aggregation) \nORDER BY\n  time ASC\n  \n  ",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Bytes Transferred",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Time",
                    "Bytes Written",
                    "Bytes Read"
                  ]
                }
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:2446",
              "decimals": 0,
              "format": "decbytes",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:2447",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": [],
              "unit": "Bps"
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 1,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 52
          },
          "hiddenSeries": false,
          "id": 273,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:2748",
              "alias": "Bytes Written/sec",
              "color": "#F2495C"
            },
            {
              "$$hashKey": "object:2749",
              "alias": "Bytes Read/sec",
              "color": "#73BF69"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "datasource",
                "uid": "-- Dashboard --"
              },
              "panelId": 14,
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Bytes written/sec vs Bytes read/sec",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Time",
                    "Bytes Written/sec",
                    "Bytes Read/sec"
                  ]
                }
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:2762",
              "decimals": 0,
              "format": "Bps",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:2763",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 3,
            "w": 24,
            "x": 0,
            "y": 58
          },
          "id": 92,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<br><p><b>Page Splits/sec</b> :  *You want < 20 per 100 Batch Requests/Sec* - Monitors the number of page splits per second which occur due to overflowing index pages and should be as low as possible. To avoid page splits, review table and index design to reduce non-sequential inserts or implement fill factor and pad_index to leave more empty space per page. NOTE: A high value for this counter is not bad in situations where many new pages are being created since it includes new page allocations.</p>",
            "mode": "html"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 1,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 61
          },
          "hiddenSeries": false,
          "id": 91,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:889",
              "alias": "Page Split Rate",
              "color": "#C4162A",
              "fill": 0,
              "fillGradient": 5,
              "yaxis": 2
            },
            {
              "$$hashKey": "object:902",
              "alias": "Batch Requests/sec",
              "color": "#1F60C4",
              "dashLength": 1,
              "dashes": true,
              "spaceLength": 4
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT \n      [time] = $__timeGroup([snapshot_time], $aggregation) \n      ,metric = [counter_name]\n      ,[value] = AVG([cntr_value_calculated])\n  FROM [dbo].[vw_sqlwatch_report_fact_perf_os_performance_counters]\n  WHERE [aggregation_interval_minutes] = 0\n  AND $__timeFilter(snapshot_time)\n  AND counter_name IN ('Page Splits/sec','Batch Requests/Sec','Log write waits','Log Flushes/sec')\n  AND [sql_instance] = '$sql_instance'\n  GROUP BY [counter_name]\n      ,$__timeGroup([snapshot_time], $aggregation) \nORDER BY\n  time ASC\n  \n  ",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Page Splits/sec",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "calculateField",
              "options": {
                "alias": "Page Split Rate",
                "binary": {
                  "left": "Page Splits/sec",
                  "operator": "/",
                  "reducer": "sum",
                  "right": "Batch Requests/sec"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "Batch Requests/sec": false,
                  "Log Flushes/sec": true,
                  "Log write waits": true
                },
                "indexByName": {},
                "renameByName": {}
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:812",
              "decimals": 0,
              "format": "short",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:813",
              "decimals": 0,
              "format": "percentunit",
              "logBase": 1,
              "min": "0",
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 67
          },
          "hiddenSeries": false,
          "id": 16,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null as zero",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 4,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT \n      [time] = $__timeGroup([snapshot_time], $aggregation) \n      ,[Latency] = SUM([total_long_ios])\n      ,metric=ISNULL([longest_pending_request_file],'')\n  FROM [dbo].[vw_sqlwatch_report_fact_xes_iosubsystem]\n  WHERE 1 = 1\n  AND $__timeFilter(snapshot_time)\n  AND [sql_instance] = '$sql_instance'\n  GROUP BY $__timeGroup([snapshot_time], $aggregation) ,[longest_pending_request_file]\nORDER BY\n  time ASC\n  \n  ",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Long IO requests",
          "tooltip": {
            "shared": false,
            "sort": 0,
            "value_type": "individual"
          },
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "short",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "label": "",
              "logBase": 1,
              "show": false
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 73
          },
          "hiddenSeries": false,
          "id": 274,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "alias": "Log write waits",
              "color": "#F2495C"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "datasource",
                "uid": "-- Dashboard --"
              },
              "panelId": 91,
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Log write waits",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Time",
                    "Log write waits"
                  ]
                }
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "short",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 2,
            "w": 21,
            "x": 0,
            "y": 79
          },
          "id": 120,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<br>\r\n<p>\r\n<b>Log Flushes/sec</b>: Technically, the number of log pages flushed to the transaction log per second.\r\n</p>",
            "mode": "html"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 81
          },
          "hiddenSeries": false,
          "id": 275,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "datasource",
                "uid": "-- Dashboard --"
              },
              "panelId": 91,
              "refId": "A"
            }
          ],
          "thresholds": [
            {
              "colorMode": "warning",
              "fill": true,
              "line": false,
              "op": "gt",
              "value": 20,
              "yaxis": "left"
            }
          ],
          "timeRegions": [],
          "title": "Log Flushes/sec",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Time",
                    "Log Flushes/sec"
                  ]
                }
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "format": "short",
              "label": "",
              "logBase": 1,
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 2,
            "w": 24,
            "x": 0,
            "y": 87
          },
          "id": 141,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<p>Making the file physically bigger is an expensive operation for the operating system. If you have a lot of log grows you may consider \"pre-growing\" files manually to a set size.<br>\r\nIn modern OS, you can also look at enablig Instant File Initialization which can grow files at no cost.</p>",
            "mode": "html"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 89
          },
          "hiddenSeries": false,
          "id": 69,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT \n      [time] = $__timeGroup([snapshot_time], $aggregation) \n      ,metric = counter_name\n      ,[value] = SUM([cntr_value_calculated])\n  FROM [dbo].[vw_sqlwatch_report_fact_perf_os_performance_counters]\n  WHERE [aggregation_interval_minutes] = 0\n  AND $__timeFilter(snapshot_time)\n  AND counter_name IN ('Log Growths')\n  AND [sql_instance] = '$sql_instance'\n  GROUP BY counter_name\n      ,$__timeGroup([snapshot_time], $aggregation) \nORDER BY\n  time ASC\n  \n  ",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Log Growths",
          "tooltip": {
            "shared": false,
            "sort": 0,
            "value_type": "individual"
          },
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "short",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 3,
            "w": 24,
            "x": 0,
            "y": 95
          },
          "id": 135,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<br>\r\n<p><b>Full Scans/sec</b>: *You want 1 Full Scan/sec per 1000 Index Searches/sec*. Monitors the number of full scans on tables or indexes. Ignore unless high CPU coincides with high scan rates. High scan rates may be caused by missing indexes, very small tables, or requests for too many records. A sudden increase in this value may indicate a statistics threshold has been reached, resulting in an index no longer being used.</p>",
            "mode": "html"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 98
          },
          "hiddenSeries": false,
          "id": 130,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "alias": "Full Scan Rate",
              "color": "#C4162A",
              "yaxis": 2
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT \n      [time] = $__timeGroup([snapshot_time], $aggregation) \n      ,metric = [counter_name]\n      ,[value] = AVG([cntr_value_calculated])\n  FROM [dbo].[vw_sqlwatch_report_fact_perf_os_performance_counters]\n  WHERE [aggregation_interval_minutes] = 0\n  AND $__timeFilter(snapshot_time)\n  AND counter_name IN ('Full Scans/sec','Index Searches/sec')\n  AND [sql_instance] = '$sql_instance'\n  GROUP BY [counter_name]\n      ,$__timeGroup([snapshot_time], $aggregation) \nORDER BY\n  time ASC\n  \n  ",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Full Scans /sec",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "calculateField",
              "options": {
                "alias": "Full Scan Rate",
                "binary": {
                  "left": "Full Scans/sec",
                  "operator": "/",
                  "reducer": "sum",
                  "right": "Index Searches/sec"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "short",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "decimals": 0,
              "format": "percentunit",
              "logBase": 1,
              "max": "1",
              "min": "0",
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        }
      ],
      "targets": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "refId": "A"
        }
      ],
      "title": "$sql_instance: SQL Server Storage",
      "type": "row"
    },
    {
      "collapsed": true,
      "datasource": {
        "type": "mssql",
        "uid": "EeAYXKY4k"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 41
      },
      "id": 284,
      "panels": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 3,
            "w": 24,
            "x": 0,
            "y": 42
          },
          "id": 286,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "# Long Queries\r\n\r\nLong queries are captured by the extended event session.\r\nBy default, any query runnig for longer than 5 seconds will be loogged.\r\nYou may want to tweak the the session to exclude certain queries or increase the duration.",
            "mode": "markdown"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "${DataSource}"
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 5,
            "w": 24,
            "x": 0,
            "y": 45
          },
          "hiddenSeries": false,
          "id": 282,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "$$hashKey": "object:857",
              "alias": "Long Queries",
              "color": "#F2495C"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "${DataSource}"
              },
              "format": "time_series",
              "queryType": "randomWalk",
              "rawSql": "SELECT time=$__timeGroup(event_time,$aggregation, 0),\n      [Long Queries] = count(*)\nFROM [dbo].[sqlwatch_logger_xes_long_queries]\nWHERE $__timeFilter([event_time])\nand sql_instance = '$sql_instance'\nGROUP BY $__timeGroup(event_time,$aggregation, 0)\n",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Long Queries",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:474",
              "decimals": 0,
              "format": "short",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:475",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": {
            "uid": "${DataSource}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto"
                },
                "filterable": false,
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "sql_text"
                },
                "properties": [
                  {
                    "id": "custom.cellOptions",
                    "value": {
                      "type": "json-view"
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "spills"
                },
                "properties": [
                  {
                    "id": "custom.width"
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 50
          },
          "id": 285,
          "options": {
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true,
            "sortBy": []
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "${DataSource}"
              },
              "format": "table",
              "queryType": "randomWalk",
              "rawSql": "SELECT       event_time\n      ,[event_name]\n      ,[session_id]\n      ,[database_name]\n      ,[cpu_time]\n      ,[physical_reads]\n      ,[logical_reads]\n      ,[writes]\n      ,[spills]\n     ,[username]\n    ,[client_hostname]\n      ,[client_app_name]\n      ,[duration_ms]\n      ,[long_query_id]\n    , sql_text      \nFROM [dbo].[vw_sqlwatch_report_fact_xes_long_queries]\nWHERE $__timeFilter([event_time])\nand sql_instance = '$sql_instance'",
              "refId": "A"
            }
          ],
          "title": "Long Queries",
          "transparent": true,
          "type": "table"
        },
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 3,
            "w": 24,
            "x": 0,
            "y": 56
          },
          "id": 241,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<br><a href=\"/d/sqlwatch-repository-summary/repository-dashboard?orgId=1&refresh=15s\">Repository Dashboard</a>\r\n<p>Folded panels become inactive and do not query database.</p>",
            "mode": "html"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        }
      ],
      "targets": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "refId": "A"
        }
      ],
      "title": "$sql_instance: SQL Server Long Queries",
      "type": "row"
    },
    {
      "collapsed": true,
      "datasource": {
        "type": "mssql",
        "uid": "EeAYXKY4k"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 42
      },
      "id": 177,
      "panels": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 4,
            "w": 24,
            "x": 0,
            "y": 43
          },
          "id": 213,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<br><h1 id=\"disks\">OS Disks</h1>\r\n<p>In OLTP systems the ideal latency is below 8ms but anything below 20ms can be acceptable. The latency between 20ms and 50ms could lead to performance problems. Latency above 50ms is likely inadequate if you want a fast database. In the Data Warehouse workload, latencies around 500ms and more are not uncommon. This is becuase in the Data Warehouse we are often reading a lot of data at once and saturate the storage IO whereas in OLTP systems we are making a lot of small writes and reads and therefore storage must be very responsive.</p>",
            "mode": "html"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 1,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 47
          },
          "hiddenSeries": false,
          "id": 105,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT \n      [time] = $__timeGroup([snapshot_time], $aggregation) \n      ,[Latency] = MAX([io_latency_read])+MAX([io_latency_write])\n      ,metric=left([file_physical_name],1)\n  FROM [dbo].[vw_sqlwatch_report_fact_perf_file_stats]\n  WHERE 1 = 1\n  AND $__timeFilter(snapshot_time)\n  AND [sql_instance] = '$sql_instance'\n  GROUP BY $__timeGroup([snapshot_time], $aggregation) , left([file_physical_name],1)\nORDER BY\n  time ASC\n  \n  ",
              "refId": "A"
            }
          ],
          "thresholds": [
            {
              "colorMode": "warning",
              "fill": true,
              "fillColor": "#FA6400",
              "line": false,
              "lineColor": "rgba(31, 96, 196, 0.6)",
              "op": "gt",
              "value": 20,
              "yaxis": "left"
            },
            {
              "colorMode": "critical",
              "fill": true,
              "line": false,
              "op": "gt",
              "value": 50,
              "yaxis": "left"
            }
          ],
          "timeRegions": [],
          "title": "Logical disk latency",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "ms",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 7,
            "w": 24,
            "x": 0,
            "y": 53
          },
          "hiddenSeries": false,
          "id": 61,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "rawSql": "SELECT \n      [time] = $__timeGroup([snapshot_time], $aggregation) \n      ,'Read Latency' = MAX([io_latency_read])\n      ,'Write Latency' = MAX([io_latency_write])\n      ,'Bytes Read Delta' = SUM([num_of_bytes_read_delta])\n      ,'Bytes Written Delta' = SUM([num_of_bytes_written_delta])\n      ,metric=file_physical_name\n  FROM [dbo].[vw_sqlwatch_report_fact_perf_file_stats]\n  WHERE 1 = 1\n  AND $__timeFilter(snapshot_time)\n  AND [sql_instance] = '$sql_instance'\n   AND database_name IN ($database)\n  GROUP BY $__timeGroup([snapshot_time], $aggregation) , file_physical_name\nORDER BY\n  time ASC\n  \n  ",
              "refId": "B"
            }
          ],
          "thresholds": [
            {
              "colorMode": "warning",
              "fill": true,
              "fillColor": "#FA6400",
              "line": false,
              "lineColor": "rgba(31, 96, 196, 0.6)",
              "op": "gt",
              "value": 20,
              "yaxis": "left"
            },
            {
              "colorMode": "critical",
              "fill": true,
              "line": false,
              "op": "gt",
              "value": 50,
              "yaxis": "left"
            }
          ],
          "timeRegions": [],
          "title": "Physical File Read Latency",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "pattern": "/Read Latency|Time/"
                }
              }
            },
            {
              "id": "renameByRegex",
              "options": {
                "regex": "Read Latency",
                "renamePattern": ""
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "ms",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 7,
            "w": 24,
            "x": 0,
            "y": 60
          },
          "hiddenSeries": false,
          "id": 201,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "datasource",
                "uid": "-- Dashboard --"
              },
              "panelId": 61,
              "refId": "A"
            }
          ],
          "thresholds": [
            {
              "colorMode": "warning",
              "fill": true,
              "fillColor": "#FA6400",
              "line": false,
              "lineColor": "rgba(31, 96, 196, 0.6)",
              "op": "gt",
              "value": 20,
              "yaxis": "left"
            },
            {
              "colorMode": "critical",
              "fill": true,
              "line": false,
              "op": "gt",
              "value": 50,
              "yaxis": "left"
            }
          ],
          "timeRegions": [],
          "title": "Physical File Write Latency",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [],
                  "pattern": "/Write Latency|Time/"
                }
              }
            },
            {
              "id": "renameByRegex",
              "options": {
                "regex": "Write Latency",
                "renamePattern": ""
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "ms",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 7,
            "w": 24,
            "x": 0,
            "y": 67
          },
          "hiddenSeries": false,
          "id": 200,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "datasource",
                "uid": "-- Dashboard --"
              },
              "panelId": 61,
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Physical File Reads",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "pattern": "/Bytes Read Delta|Time/"
                }
              }
            },
            {
              "id": "renameByRegex",
              "options": {
                "regex": "Bytes Read Delta",
                "renamePattern": ""
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "decbytes",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 7,
            "w": 24,
            "x": 0,
            "y": 74
          },
          "hiddenSeries": false,
          "id": 63,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "datasource",
                "uid": "-- Dashboard --"
              },
              "panelId": 61,
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Physical File Writes",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "pattern": "/Bytes Written Delta|Time/"
                }
              }
            },
            {
              "id": "renameByRegex",
              "options": {
                "regex": "Bytes Written Delta",
                "renamePattern": ""
              }
            }
          ],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "decbytes",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        }
      ],
      "targets": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "refId": "A"
        }
      ],
      "title": "$sql_instance: OS Disks",
      "type": "row"
    },
    {
      "collapsed": true,
      "datasource": {
        "type": "mssql",
        "uid": "EeAYXKY4k"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 43
      },
      "id": 175,
      "panels": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 4,
            "w": 24,
            "x": 0,
            "y": 44
          },
          "id": 32,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<br><h1 id=\"network\">OS Network</h1>\r\n<p>Network interfaces exposed to the OS. Any network traffic from and to SQL Server will be going through these.</p>",
            "mode": "markdown"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": [],
              "unit": "ms"
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 1,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 48
          },
          "hiddenSeries": false,
          "id": 17,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "alias": "Average wait time (ms)",
              "color": "#F2495C"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT \n      [time] = $__timeGroup([snapshot_time], $aggregation) \n      ,metric = [instance_name]\n      ,[value] = AVG([cntr_value_calculated])\n  FROM [dbo].[vw_sqlwatch_report_fact_perf_os_performance_counters]\n  WHERE [aggregation_interval_minutes] = 0\n  AND $__timeFilter(snapshot_time)\n  AND counter_name = 'Network IO waits'\n  AND [sql_instance] = '$sql_instance'\n  GROUP BY [instance_name]\n      ,$__timeGroup([snapshot_time], $aggregation) \nORDER BY\n  time ASC\n  \n  ",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Network IO waits",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "ms",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        }
      ],
      "targets": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "refId": "A"
        }
      ],
      "title": "$sql_instance: OS Network",
      "type": "row"
    },
    {
      "collapsed": true,
      "datasource": {
        "type": "mssql",
        "uid": "EeAYXKY4k"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 44
      },
      "id": 234,
      "panels": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 4,
            "w": 24,
            "x": 0,
            "y": 45
          },
          "id": 238,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "<br><h1 id=\"network\">Availability Group Replicas</h1>\r\n<p><a href=\"https://docs.microsoft.com/en-us/sql/relational-databases/performance-monitor/sql-server-database-replica\">More details about AG related perf counters</a>\r\n</p>\r\n",
            "mode": "markdown"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "datasource": {
            "uid": "${DataSource}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto"
                },
                "filterable": false,
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 5,
            "w": 24,
            "x": 0,
            "y": 49
          },
          "id": 244,
          "options": {
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "${DataSource}"
              },
              "format": "table",
              "queryType": "randomWalk",
              "rawSql": "select [hadr_group_name]\r\n      ,[replica_server_name]\r\n      ,[availability_mode_desc]\r\n      ,[failover_mode_desc]\r\n      ,[database_name]\r\n      ,[is_local]\r\n      ,[is_primary_replica]\r\n      ,[synchronization_state_desc]\r\n      ,[is_commit_participant]\r\n      ,[synchronization_health_desc]\r\n\t  ,[database_state]\r\n      ,[database_state_desc]\r\n      ,[is_suspended]\r\n      ,[suspend_reason_desc]\r\n      ,[log_send_queue_size]\r\n      ,[log_send_rate]\r\n      ,[redo_queue_size]\r\n      ,[redo_rate]\r\n      ,[filestream_send_rate]\r\n      ,[secondary_lag_seconds]\r\n      ,[last_commit_time]\r\n      ,[snapshot_time]\r\n      ,[sql_instance]\r\nfrom (\r\n\tSELECT *\r\n\t\r\n\t, RN=ROW_NUMBER() over (partition by hadr_group_name, replica_server_name, database_name, sql_instance order by snapshot_time desc)\r\n\t  FROM [dbo].[vw_sqlwatch_report_hadr_database_replica_states]\r\n\t  WHERE $__timeFilter(snapshot_time)\r\n\t  AND sql_instance = '$sql_instance'\r\n\t  ) t\r\nWHERE RN=1",
              "refId": "A"
            }
          ],
          "title": "Current Replica States",
          "type": "table"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": [],
              "unit": "Bps"
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 1,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 54
          },
          "hiddenSeries": false,
          "id": 235,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "alias": "Average wait time (ms)",
              "color": "#F2495C"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT \n      [time] = $__timeGroup([snapshot_time], $aggregation) \n      ,metric = [instance_name]\n      ,[value] = AVG([cntr_value_calculated])\n  FROM [dbo].[vw_sqlwatch_report_fact_perf_os_performance_counters]\n  WHERE [aggregation_interval_minutes] = 0\n  AND $__timeFilter(snapshot_time)\n  AND counter_name in ('Redone Bytes/sec')\n  AND [sql_instance] = '$sql_instance'\n\n  GROUP BY [instance_name]\n      ,$__timeGroup([snapshot_time], $aggregation) \nORDER BY\n  time ASC\n  \n  ",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Redo rate",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "Bps",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": [],
              "unit": "Bps"
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 1,
          "gridPos": {
            "h": 7,
            "w": 24,
            "x": 0,
            "y": 60
          },
          "hiddenSeries": false,
          "id": 245,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT \n      [time] = $__timeGroup([snapshot_time], $aggregation) \n      ,metric = [instance_name]\n      ,[value] = AVG([cntr_value_calculated])\n  FROM [dbo].[vw_sqlwatch_report_fact_perf_os_performance_counters]\n  WHERE [aggregation_interval_minutes] = 0\n  AND $__timeFilter(snapshot_time)\n  AND counter_name in ('Bytes Sent to Replica/sec')\n  AND [sql_instance] = '$sql_instance'\n\n  GROUP BY [instance_name]\n      ,$__timeGroup([snapshot_time], $aggregation) \nORDER BY\n  time ASC\n  \n  ",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Bytes Sent to Replica",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "Bps",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": [],
              "unit": "Bps"
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 1,
          "gridPos": {
            "h": 7,
            "w": 24,
            "x": 0,
            "y": 67
          },
          "hiddenSeries": false,
          "id": 242,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "alias": "Average wait time (ms)",
              "color": "#F2495C"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT \n      [time] = $__timeGroup([snapshot_time], $aggregation) \n      ,metric = [instance_name]\n      ,[value] = AVG([cntr_value_calculated])\n  FROM [dbo].[vw_sqlwatch_report_fact_perf_os_performance_counters]\n  WHERE [aggregation_interval_minutes] = 0\n  AND $__timeFilter(snapshot_time)\n  AND counter_name in ('Bytes Received from Replica/sec')\n  AND [sql_instance] = '$sql_instance'\n  GROUP BY [instance_name]\n      ,$__timeGroup([snapshot_time], $aggregation) \nORDER BY\n  time ASC\n  \n  ",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Bytes Received from Replica",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "Bps",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "fieldConfig": {
            "defaults": {
              "custom": {}
            },
            "overrides": []
          },
          "gridPos": {
            "h": 2,
            "w": 24,
            "x": 0,
            "y": 74
          },
          "id": 239,
          "options": {
            "content": "<br>\r\n<p>\r\n\r\n<b>Log Send Queue</b> Amount of log records in the log files of the primary database, in kilobytes, that haven't been sent to the secondary replica. This value is sent to the secondary replica from the primary replica. Queue size doesn't include FILESTREAM files that are sent to a secondary.\r\n</p>",
            "mode": "html"
          },
          "pluginVersion": "7.4.2",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "custom": {},
              "links": [],
              "thresholds": {
                "mode": "absolute",
                "steps": []
              },
              "unit": "deckbytes"
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 1,
          "gridPos": {
            "h": 6,
            "w": 24,
            "x": 0,
            "y": 76
          },
          "hiddenSeries": false,
          "id": 237,
          "legend": {
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.4.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "alias": "Average wait time (ms)",
              "color": "#F2495C"
            }
          ],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT \n      [time] = $__timeGroup([snapshot_time], $aggregation) \n      ,metric = [instance_name]\n      ,[value] = AVG([cntr_value_calculated])\n  FROM [dbo].[vw_sqlwatch_report_fact_perf_os_performance_counters]\n  WHERE [aggregation_interval_minutes] = 0\n  AND $__timeFilter(snapshot_time)\n  AND counter_name in ('Log Send Queue')\n  AND [sql_instance] = '$sql_instance'\n\n  GROUP BY [instance_name]\n      ,$__timeGroup([snapshot_time], $aggregation) \nORDER BY\n  time ASC\n  \n  ",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Log Send Queue",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "deckbytes",
              "label": "",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        }
      ],
      "targets": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "refId": "A"
        }
      ],
      "title": "$sql_instance: Availability Groups",
      "type": "row"
    },
    {
      "collapsed": true,
      "datasource": {
        "type": "mssql",
        "uid": "EeAYXKY4k"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 45
      },
      "id": 220,
      "panels": [
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "0 - OK\n1 - WARNING\n2 - CRITICAL\n3 - CHECK ERROR",
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 7,
            "w": 24,
            "x": 0,
            "y": 46
          },
          "hiddenSeries": false,
          "id": 251,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": false,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": true,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT  [metric] = replace([check_name],' failure count','')\n        ,value = CASE [check_status] \n        WHEN 'CRITICAL' THEN 2\n        WHEN 'WARNING' THEN 1\n        WHEN 'OK' THEN 0\n        ELSE 3 END\n        ,time=[snapshot_time]\n  FROM [dbo].[vw_sqlwatch_report_fact_check] with (nolock)\n  WHERE  target_sql_instance = '$sql_instance'\n  --AND check_enabled = 1\n  AND $__timeFilter([snapshot_time])\n  AND check_status <> 'OK'\n  --AND last_check_status IN ($Status)\n  order by time asc",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Check Failure History",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "transformations": [],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:165",
              "decimals": 0,
              "format": "short",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:166",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "mode": "gradient",
                  "type": "color-background"
                },
                "filterable": true,
                "inspect": false
              },
              "links": [],
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "rgba(115, 191, 105, 0)",
                    "value": null
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "status"
                },
                "properties": [
                  {
                    "id": "mappings",
                    "value": [
                      {
                        "options": {
                          "0": {
                            "text": "OK"
                          },
                          "1": {
                            "text": "WARNING"
                          },
                          "2": {
                            "text": "CRITICAL"
                          },
                          "3": {
                            "text": "CHECK ERROR"
                          }
                        },
                        "type": "value"
                      }
                    ]
                  },
                  {
                    "id": "thresholds",
                    "value": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "purple",
                          "value": null
                        },
                        {
                          "color": "green",
                          "value": 0
                        },
                        {
                          "color": "orange",
                          "value": 1
                        },
                        {
                          "color": "red",
                          "value": 2
                        },
                        {
                          "color": "purple",
                          "value": 3
                        }
                      ]
                    }
                  },
                  {
                    "id": "custom.width",
                    "value": 200
                  },
                  {
                    "id": "displayName",
                    "value": "Status"
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "last_check_value"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 100
                  },
                  {
                    "id": "custom.cellOptions",
                    "value": {
                      "type": "auto"
                    }
                  },
                  {
                    "id": "displayName",
                    "value": "Value"
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "check_description"
                },
                "properties": [
                  {
                    "id": "custom.cellOptions",
                    "value": {
                      "type": "json-view"
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "check_name"
                },
                "properties": [
                  {
                    "id": "links",
                    "value": []
                  },
                  {
                    "id": "displayName",
                    "value": "Name"
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Name"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 375
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Description"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 1002
                  },
                  {
                    "id": "custom.cellOptions",
                    "value": {
                      "type": "json-view"
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Check Date"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 232
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Value"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 0
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Status"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 115
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 15,
            "w": 24,
            "x": 0,
            "y": 53
          },
          "id": 252,
          "options": {
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true,
            "sortBy": [
              {
                "desc": true,
                "displayName": "Status"
              }
            ]
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "table",
              "hide": false,
              "rawSql": "SELECT  [check_name] = replace([check_name],' failure count','')\n        , check_description\n        ,[last_check_value] = convert(varchar(max),[last_check_value])\n        ,status = CASE [last_check_status] \n        WHEN 'CRITICAL' THEN 2\n        WHEN 'WARNING' THEN 1\n        WHEN 'OK' THEN 0\n        ELSE 3 END\n        ,last_check_date\n  FROM [dbo].[vw_sqlwatch_report_dim_check] with (nolock)\n  WHERE  [target_sql_instance] = '$sql_instance'\n  AND check_enabled = 1\n  --AND $__timeFilter(last_check_date)\n  --AND last_check_status IN ($Status)\n  order by case when last_check_status = 'OK' then dateadd(month,-1,last_check_date) else last_check_date end desc",
              "refId": "A"
            }
          ],
          "title": "Checks",
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {}
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {},
                "indexByName": {
                  "check_description": 1,
                  "check_name": 0,
                  "last_check_value": 3,
                  "status": 2
                },
                "renameByName": {
                  "check_description": "Description",
                  "check_name": "",
                  "last_check_date": "Check Date",
                  "last_check_value": "",
                  "status": ""
                }
              }
            }
          ],
          "transparent": true,
          "type": "table"
        },
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "gridPos": {
            "h": 3,
            "w": 24,
            "x": 0,
            "y": 68
          },
          "id": 280,
          "options": {
            "code": {
              "language": "plaintext",
              "showLineNumbers": false,
              "showMiniMap": false
            },
            "content": "# Checks Execution Time\nChecks execution time tells us how it takes to execute each check.\nThis is important as the check execution is single threaded and runs every minute. All checks must complete within that minute.\nIf you are writing custom checks you must make sure that they complete within milliseconds.",
            "mode": "markdown"
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "transparent": true,
          "type": "text"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "unit": "ms"
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 24,
            "x": 0,
            "y": 71
          },
          "hiddenSeries": false,
          "id": 278,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": true,
            "min": true,
            "show": true,
            "sort": "avg",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": false
          },
          "percentage": false,
          "pluginVersion": "9.4.7",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT time=$__timeGroup(snapshot_time, $aggregation)\r\n      ,metric='(' + convert(varchar(10),[check_id]) + ') ' + [check_name] \r\n      ,[value]=avg([check_exec_time_ms])\r\n  FROM [dbo].[vw_sqlwatch_report_fact_check] with (nolock)\r\n  WHERE  target_sql_instance = '$sql_instance'\r\n  --AND check_enabled = 1\r\n  AND $__timeFilter([snapshot_time])\r\n  AND check_status <> 'OK'\r\n  --AND last_check_status IN ($Status)\r\n  group by $__timeGroup(snapshot_time, $aggregation), '(' + convert(varchar(10),[check_id]) + ') ' + [check_name] \r\n  order by time asc",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Check Execution Time",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "transformations": [],
          "transparent": true,
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:225",
              "decimals": 0,
              "format": "ms",
              "logBase": 1,
              "min": "0",
              "show": true
            },
            {
              "$$hashKey": "object:226",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        }
      ],
      "targets": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "refId": "A"
        }
      ],
      "title": "$sql_instance: Checks",
      "type": "row"
    },
    {
      "collapsed": true,
      "datasource": {
        "type": "mssql",
        "uid": "EeAYXKY4k"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 46
      },
      "id": 304,
      "panels": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "fieldConfig": {
            "defaults": {
              "custom": {}
            },
            "overrides": []
          },
          "gridPos": {
            "h": 3,
            "w": 24,
            "x": 0,
            "y": 47
          },
          "id": 292,
          "options": {
            "content": " ## Altenarnative charts for the Overview panel\r\n Some data is best presented as timeline and some as bar chart.\r\n Bar charts provide a way of comparison across metrics so we can see which ones stand our but sparklines provide a bit of history os we can see how the metric was doing in the last few minutes. However, sparklines do not provide any comparison across metrics.\r\n I am giving you an option to pick whichever module you want, just drag and drop and delete those you do not need.\r\n The beauty of Grafana is that you can build your own dashboards!",
            "mode": "markdown"
          },
          "pluginVersion": "7.4.2",
          "targets": [
            {
              "datasource": {
                "type": "mssql",
                "uid": "EeAYXKY4k"
              },
              "queryType": "randomWalk",
              "refId": "A"
            }
          ],
          "title": "",
          "transparent": true,
          "type": "text"
        },
        {
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {},
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "dark-green"
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 12,
            "w": 3,
            "x": 6,
            "y": 50
          },
          "id": 302,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "text": {
              "titleSize": 12
            },
            "textMode": "auto"
          },
          "pluginVersion": "7.4.2",
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT time = r1.snapshot_time\r\n      ,[running] = avg(running)\r\n      ,[sleeping] = avg(sleeping)\r\n      ,[dormant] = avg(dormant)\r\n      --,[preconnect] = avg(preconnect)\r\n      ,[cpu_time] = avg(cpu_time)\r\n      ,[reads] = avg(reads)\r\n      ,[writes] = avg(writes)\r\n      ,  type = case when type = 1 then 'User' else 'System' end\r\n  FROM [sqlwatch_logger_dm_exec_sessions_stats] r1 (nolock)\r\n\twhere $__timeFilter(r1.snapshot_time)\r\n  and snapshot_time > dateadd(minute,-15,GETUTCDATE())\t\r\n  and r1.sql_instance = '$sql_instance'\r\n  group by r1.snapshot_time, case when type = 1 then 'User' else 'System' end\r\n  order by time asc",
              "refId": "2"
            }
          ],
          "title": "Sessions",
          "transformations": [
            {
              "id": "seriesToColumns",
              "options": {
                "byField": "Time"
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "System cpu_time": true,
                  "System reads": true,
                  "System writes": true,
                  "User cpu_time": true,
                  "User reads": true,
                  "User writes": true,
                  "cpu_time": true,
                  "reads": true,
                  "writes": true
                },
                "indexByName": {
                  "Time": 0,
                  "max": 3,
                  "min": 4,
                  "sql": 2,
                  "system": 1
                },
                "renameByName": {}
              }
            }
          ],
          "type": "stat"
        },
        {
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "fixedColor": "dark-green",
                "mode": "thresholds"
              },
              "custom": {},
              "decimals": 0,
              "links": [],
              "mappings": [],
              "min": 0,
              "noValue": "0",
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "dark-green"
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byRegexp",
                  "options": "Waiting|Suspended|Runnable"
                },
                "properties": [
                  {
                    "id": "thresholds",
                    "value": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "dark-green"
                        },
                        {
                          "color": "light-orange",
                          "value": 1
                        },
                        {
                          "color": "red",
                          "value": 2
                        }
                      ]
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 12,
            "w": 3,
            "x": 9,
            "y": 50
          },
          "id": 301,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "text": {
              "valueSize": 16
            },
            "textMode": "auto"
          },
          "pluginVersion": "7.4.2",
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT time = r1.snapshot_time\r\n      ,  Background\t= background\r\n      ,  Running = running\r\n      ,  Runnable = runnable\r\n      ,  Sleeping\t = sleeping\r\n      ,  Suspended\t = suspended\r\n      ,  Waiting\t = waiting_tasks\r\n  FROM [sqlwatch_logger_dm_exec_requests_stats] r1 (nolock)\r\n\twhere $__timeFilter(r1.snapshot_time)\r\n\tand r1.snapshot_time > dateadd(minute,-15,getutcdate())\r\n  and r1.sql_instance = '$sql_instance'\r\n  and type = 1\r\n  order by time asc",
              "refId": "A"
            }
          ],
          "title": "Requests",
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Time",
                    "Background",
                    "Running",
                    "Runnable",
                    "Sleeping",
                    "Suspended",
                    "Waiting"
                  ]
                }
              }
            }
          ],
          "type": "stat"
        },
        {
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "fixedColor": "green",
                "mode": "thresholds"
              },
              "custom": {},
              "decimals": 0,
              "links": [],
              "mappings": [],
              "min": 0,
              "noValue": "0",
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "dark-green"
                  },
                  {
                    "color": "dark-green",
                    "value": 1
                  }
                ]
              },
              "unit": "deckbytes"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "Memory Deficit"
                },
                "properties": [
                  {
                    "id": "thresholds",
                    "value": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "dark-green"
                        },
                        {
                          "color": "red",
                          "value": 1
                        }
                      ]
                    }
                  },
                  {
                    "id": "mappings",
                    "value": [
                      {
                        "options": {
                          "from": -99999999,
                          "result": {
                            "text": "0"
                          },
                          "to": 0
                        },
                        "type": "range"
                      }
                    ]
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 12,
            "w": 3,
            "x": 12,
            "y": 50
          },
          "id": 289,
          "options": {
            "displayMode": "basic",
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showUnfilled": false,
            "text": {
              "titleSize": 12,
              "valueSize": 16
            }
          },
          "pluginVersion": "7.4.2",
          "targets": [
            {
              "datasource": {
                "type": "datasource",
                "uid": "-- Dashboard --"
              },
              "panelId": 269,
              "refId": "A"
            }
          ],
          "title": "SQL Memory",
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Time",
                    "Connection Memory (KB)",
                    "Optimizer Memory (KB)",
                    "SQL Cache Memory (KB)",
                    "Total Server Memory (KB)",
                    "Stolen Server Memory (KB)",
                    "Target Server Memory (KB)"
                  ]
                }
              }
            },
            {
              "id": "renameByRegex",
              "options": {
                "regex": "(\\(KB\\))",
                "renamePattern": ""
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "Memory Deficit",
                "binary": {
                  "left": "Target Server Memory ",
                  "operator": "-",
                  "reducer": "sum",
                  "right": "Total Server Memory "
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {},
                "indexByName": {
                  "Connection Memory ": 1,
                  "Memory Requirement": 7,
                  "Optimizer Memory ": 2,
                  "SQL Cache Memory ": 3,
                  "Stolen Server Memory ": 4,
                  "Target Server Memory ": 6,
                  "Time": 0,
                  "Total Server Memory ": 5
                },
                "renameByName": {}
              }
            }
          ],
          "type": "bargauge"
        },
        {
          "datasource": {
            "type": "datasource",
            "uid": "-- Dashboard --"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "fixedColor": "rgb(105, 105, 105)",
                "mode": "thresholds"
              },
              "custom": {},
              "decimals": 0,
              "links": [],
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "dark-green"
                  }
                ]
              },
              "unit": "Bps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 12,
            "w": 3,
            "x": 15,
            "y": 50
          },
          "id": 306,
          "options": {
            "displayMode": "basic",
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showUnfilled": true,
            "text": {
              "titleSize": 12
            }
          },
          "pluginVersion": "7.4.2",
          "targets": [
            {
              "datasource": {
                "type": "datasource",
                "uid": "-- Dashboard --"
              },
              "panelId": 15,
              "refId": "A"
            }
          ],
          "title": "Disk IO",
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "pattern": "/IO/"
                }
              }
            },
            {
              "id": "renameByRegex",
              "options": {
                "regex": "(.IO$)",
                "renamePattern": ""
              }
            }
          ],
          "type": "bargauge"
        },
        {
          "datasource": {
            "uid": "$DataSource"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {},
              "decimals": 0,
              "links": [],
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "dark-green"
                  },
                  {
                    "color": "light-orange",
                    "value": 20
                  },
                  {
                    "color": "red",
                    "value": 50
                  }
                ]
              },
              "unit": "ms"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 12,
            "w": 3,
            "x": 18,
            "y": 50
          },
          "id": 307,
          "options": {
            "displayMode": "basic",
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showUnfilled": true,
            "text": {
              "titleSize": 12
            }
          },
          "pluginVersion": "7.4.2",
          "targets": [
            {
              "alias": "",
              "datasource": {
                "uid": "$DataSource"
              },
              "format": "time_series",
              "hide": false,
              "rawSql": "SELECT \n      [time] = snapshot_time \n      ,[Latency Reads] = MAX(fs.[io_latency_read])\n      ,[Latency Writes] = MAX(fs.[io_latency_write])\n  \t  ,[Reads IO] = AVG(fs.bytes_read_per_second)\n  \t  ,[Writes IO] = AVG(fs.bytes_written_per_second)\n      ,[Disk] = left(upper([file_physical_name]),2) + ' ' + isnull(v.label,'')\n      ,[Max Latency] = max(case when fs.[io_latency_read] > fs.[io_latency_write] then fs.[io_latency_read] else fs.[io_latency_write] end)\n  FROM [dbo].[vw_sqlwatch_report_fact_perf_file_stats] fs\n  outer apply (\n    select top 1 label \n    from [dbo].[sqlwatch_meta_os_volume] v\n\t  where v.volume_name = left(fs.file_physical_name,3)) v\n  WHERE 1 = 1\n  AND $__timeFilter(fs.snapshot_time)\n    and snapshot_time >= dateadd(minute,-15,getutcdate())\n  AND [sql_instance] = '$sql_instance'\n  AND database_name IN ($database)\n  GROUP BY fs.snapshot_time \n  , left(upper([file_physical_name]),2) + ' ' + isnull(v.label,'')\nORDER BY\n  time ASC",
              "refId": "File Stats"
            }
          ],
          "title": "Disk Latency",
          "transformations": [
            {
              "id": "renameByRegex",
              "options": {
                "regex": "(.Max Latency)",
                "renamePattern": "IGNORE"
              }
            },
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "pattern": "/Latency/"
                }
              }
            },
            {
              "id": "renameByRegex",
              "options": {
                "regex": "(.Latency)",
                "renamePattern": ""
              }
            }
          ],
          "type": "bargauge"
        }
      ],
      "targets": [
        {
          "datasource": {
            "type": "mssql",
            "uid": "EeAYXKY4k"
          },
          "refId": "A"
        }
      ],
      "title": "$sql_instance: SQL Server Overview - Alternative Graphs",
      "type": "row"
    }
  ],
  "refresh": "1m",
  "revision": 1,
  "schemaVersion": 38,
  "style": "dark",
  "tags": [
    "SQLWATCH"
  ],
  "templating": {
    "list": [
      {
        "current": {
          "selected": false,
          "text": "SQLWATCH",
          "value": "SQLWATCH"
        },
        "description": "The repository is the SQL Server Instance hosting the SQLWATCH database. This can be a stand alone production instance or the central repository.",
        "hide": 0,
        "includeAll": false,
        "label": "Repository",
        "multi": false,
        "name": "DataSource",
        "options": [],
        "query": "mssql",
        "queryValue": "",
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "type": "datasource"
      },
      {
        "current": {
          "selected": false,
          "text": "SQLWATCH-OSS\\SQL2019STD",
          "value": "SQLWATCH-OSS\\SQL2019STD"
        },
        "datasource": {
          "uid": "$DataSource"
        },
        "definition": "SELECT [servername] FROM [dbo].[sqlwatch_meta_server]",
        "description": "The SQL Instance (servername) as captured by the SQLWATCH in `dbo].[sqlwatch_meta_server]. If you are connecting to the central repository, this list will show all collected servers.",
        "hide": 0,
        "includeAll": false,
        "label": "SQL Instance",
        "multi": false,
        "name": "sql_instance",
        "options": [],
        "query": "SELECT [servername] FROM [dbo].[sqlwatch_meta_server]",
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "sort": 1,
        "tagValuesQuery": "",
        "tagsQuery": "",
        "type": "query",
        "useTags": false
      },
      {
        "auto": true,
        "auto_count": 100,
        "auto_min": "1s",
        "current": {
          "selected": false,
          "text": "auto",
          "value": "$__auto_interval_aggregation"
        },
        "description": "When showing larger periods, such as last hour or last day, we have to aggregate the data as otherwise we would have killed the SQL and Grafana. Aggregation means that we're going to average the data over time buckets such 1 minute or 1 hour. You can set this to your liking but best leave to Auto.",
        "hide": 0,
        "label": "Aggregation",
        "name": "aggregation",
        "options": [
          {
            "selected": true,
            "text": "auto",
            "value": "$__auto_interval_aggregation"
          },
          {
            "selected": false,
            "text": "1s",
            "value": "1s"
          },
          {
            "selected": false,
            "text": "1m",
            "value": "1m"
          },
          {
            "selected": false,
            "text": "1h",
            "value": "1h"
          },
          {
            "selected": false,
            "text": "1d",
            "value": "1d"
          }
        ],
        "query": "1s,1m,1h,1d",
        "queryValue": "",
        "refresh": 2,
        "skipUrlSync": false,
        "type": "interval"
      },
      {
        "current": {
          "selected": false,
          "text": "Category",
          "value": "Category"
        },
        "description": "Whether to show Wait Categories or Types. Wait Types are grouped into categories and whilst types provide more insight, categories give you a quick view into where the problems are.",
        "hide": 0,
        "includeAll": false,
        "label": "Waits By",
        "multi": false,
        "name": "Waits",
        "options": [
          {
            "selected": true,
            "text": "Category",
            "value": "Category"
          },
          {
            "selected": false,
            "text": "Type",
            "value": "Type"
          }
        ],
        "query": "Category,Type",
        "queryValue": "",
        "skipUrlSync": false,
        "type": "custom"
      },
      {
        "current": {
          "selected": false,
          "text": "ms/sec",
          "value": "ms/sec"
        },
        "description": "How we should be showing wait calculation - as a delta between snapshots, or as absolute ms/sec within the snapshot. Delta will allow to see trends into whether waits are getting worse or better.",
        "hide": 0,
        "includeAll": false,
        "label": "Wait Calculation",
        "multi": false,
        "name": "WaitCalc",
        "options": [
          {
            "selected": true,
            "text": "ms/sec",
            "value": "ms/sec"
          },
          {
            "selected": false,
            "text": "Delta",
            "value": "Delta"
          }
        ],
        "query": "ms/sec,Delta",
        "queryValue": "",
        "skipUrlSync": false,
        "type": "custom"
      },
      {
        "current": {
          "selected": false,
          "text": "No",
          "value": "No"
        },
        "hide": 2,
        "includeAll": false,
        "label": "Show OK Checks",
        "multi": false,
        "name": "ShowChecksOK",
        "options": [
          {
            "selected": false,
            "text": "Yes",
            "value": "Yes"
          },
          {
            "selected": true,
            "text": "No",
            "value": "No"
          }
        ],
        "query": "Yes,No",
        "queryValue": "",
        "skipUrlSync": false,
        "type": "custom"
      },
      {
        "current": {
          "selected": false,
          "text": "Microsoft SQL Server 2019 (RTM) - 15.0.2000.5 (X64) \n\tSep 24 2019 13:48:23 \n\tCopyright (C) 2019 Microsoft Corporation\n\tStandard Edition (64-bit) on Windows Server 2019 Datacenter 10.0 <X64> (Build 17763: ) (Hypervisor)\n",
          "value": "Microsoft SQL Server 2019 (RTM) - 15.0.2000.5 (X64) \n\tSep 24 2019 13:48:23 \n\tCopyright (C) 2019 Microsoft Corporation\n\tStandard Edition (64-bit) on Windows Server 2019 Datacenter 10.0 <X64> (Build 17763: ) (Hypervisor)\n"
        },
        "datasource": {
          "uid": "${DataSource}"
        },
        "definition": "select [sql_version]\n  FROM [dbo].[sqlwatch_meta_server]\n  WHERE servername = '$sql_instance'",
        "hide": 2,
        "includeAll": false,
        "label": "SQL Version",
        "multi": false,
        "name": "sql_version",
        "options": [],
        "query": "select [sql_version]\n  FROM [dbo].[sqlwatch_meta_server]\n  WHERE servername = '$sql_instance'",
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "sort": 0,
        "tagValuesQuery": "",
        "tagsQuery": "",
        "type": "query",
        "useTags": false
      },
      {
        "current": {
          "selected": true,
          "text": [
            "All"
          ],
          "value": [
            "$__all"
          ]
        },
        "datasource": {
          "uid": "${DataSource}"
        },
        "definition": "select database_name from [dbo].[sqlwatch_meta_database] where sql_instance = '$sql_instance'",
        "description": "Filter database related metrics by database. This can be handy if we're interested in performance of  a particular database. However, note that metrics at the server level (like CPU) will not account for this filter.",
        "hide": 0,
        "includeAll": true,
        "label": "Database",
        "multi": true,
        "name": "database",
        "options": [],
        "query": "select database_name from [dbo].[sqlwatch_meta_database] where sql_instance = '$sql_instance'",
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "sort": 0,
        "tagValuesQuery": "",
        "tagsQuery": "",
        "type": "query",
        "useTags": false
      },
      {
        "current": {
          "selected": false,
          "text": "None",
          "value": "None"
        },
        "datasource": {
          "uid": "${DataSource}"
        },
        "definition": "select [baseline] = 'None'\nunion all\nselect [baseline] = '-1h'\nunion all\nselect [baseline] = '-1d'\nunion all\nselect [baseline] = '-1w'\nunion all\nselect [baseline] = 'Daily'\nunion all\nSELECT [baseline] = 'User Baseline: ' + convert(varchar(100),[baseline_id])\nFROM [dbo].[sqlwatch_meta_baseline]\nWHERE sql_instance = '$sql_instance'",
        "description": "This is not yet Implemented",
        "hide": 2,
        "includeAll": false,
        "label": "Baseline",
        "multi": false,
        "name": "baseline",
        "options": [],
        "query": "select [baseline] = 'None'\nunion all\nselect [baseline] = '-1h'\nunion all\nselect [baseline] = '-1d'\nunion all\nselect [baseline] = '-1w'\nunion all\nselect [baseline] = 'Daily'\nunion all\nSELECT [baseline] = 'User Baseline: ' + convert(varchar(100),[baseline_id])\nFROM [dbo].[sqlwatch_meta_baseline]\nWHERE sql_instance = '$sql_instance'",
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "sort": 0,
        "tagValuesQuery": "",
        "tagsQuery": "",
        "type": "query",
        "useTags": false
      },
      {
        "current": {
          "selected": false,
          "text": "All",
          "value": "All"
        },
        "description": "Whether we should only show currently running requests and sessions (as of very last capture) or all requests captured within the dashboard time period.",
        "hide": 2,
        "includeAll": false,
        "label": "Requests",
        "multi": false,
        "name": "currentrequests",
        "options": [
          {
            "selected": false,
            "text": "Current",
            "value": "Current"
          },
          {
            "selected": true,
            "text": "All",
            "value": "All"
          }
        ],
        "query": "Current,All",
        "queryValue": "",
        "skipUrlSync": false,
        "type": "custom"
      }
    ]
  },
  "time": {
    "from": "now-5m",
    "to": "now"
  },
  "timepicker": {
    "hidden": false,
    "refresh_intervals": [
      "5s",
      "1m"
    ]
  },
  "timezone": "utc",
  "title": "SQL Instance Overview",
  "uid": "sqlwatch-instance-overview",
  "version": 3,
  "weekStart": ""
}
